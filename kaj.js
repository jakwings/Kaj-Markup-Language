(function e$$0(l,f,d){function g(e,a){if(!f[e]){if(!l[e]){var b="function"==typeof require&&require;if(!a&&b)return b(e,!0);if(c)return c(e,!0);b=Error("Cannot find module '"+e+"'");throw b.code="MODULE_NOT_FOUND",b;}b=f[e]={exports:{}};l[e][0].call(b.exports,function(a){var c=l[e][1][a];return g(c?c:a)},b,b.exports,e$$0,l,f,d)}return f[e].exports}for(var c="function"==typeof require&&require,b=0;b<d.length;b++)g(d[b]);return g})({1:[function(h,l,f){function d(a,j,A){if(!(this instanceof d))return new d(a,
j,A);var e=typeof a,c;if("number"===e)c=0<a?a>>>0:0;else if("string"===e){if("base64"===j)for(a=(a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")).replace(J,"");0!==a.length%4;)a+="=";c=d.byteLength(a,j)}else if("object"===e&&null!==a)"Buffer"===a.type&&m(a.data)&&(a=a.data),c=0<+a.length?Math.floor(+a.length):0;else throw Error("First argument needs to be a number, array or string.");var b;C?b=d._augment(new Uint8Array(c)):(b=this,b.length=c,b._isBuffer=!0);if(C&&"number"===typeof a.byteLength)b._set(a);
else if(m(a)||d.isBuffer(a)||a&&"object"===typeof a&&"number"===typeof a.length)if(d.isBuffer(a))for(j=0;j<c;j++)b[j]=a.readUInt8(j);else for(j=0;j<c;j++)b[j]=(a[j]%256+256)%256;else if("string"===e)b.write(a,0,j);else if("number"===e&&!C&&!A)for(j=0;j<c;j++)b[j]=0;return b}function g(a,j,A,c){for(var e=[],b=0;b<j.length;b++)e.push(j.charCodeAt(b)&255);return v(e,a,A,c)}function c(a,j,A){var c="";for(A=Math.min(a.length,A);j<A;j++)c+=String.fromCharCode(a[j]);return c}function b(a,j,A,c){c||(k("boolean"===
typeof A,"missing or invalid endian"),k(void 0!==j&&null!==j,"missing offset"),k(j+1<a.length,"Trying to read beyond buffer length"));c=a.length;if(!(j>=c))return A?(A=a[j],j+1<c&&(A|=a[j+1]<<8)):(A=a[j]<<8,j+1<c&&(A|=a[j+1])),A}function e(a,j,c,e){e||(k("boolean"===typeof c,"missing or invalid endian"),k(void 0!==j&&null!==j,"missing offset"),k(j+3<a.length,"Trying to read beyond buffer length"));e=a.length;if(!(j>=e)){var b;c?(j+2<e&&(b=a[j+2]<<16),j+1<e&&(b|=a[j+1]<<8),b|=a[j],j+3<e&&(b+=a[j+3]<<
24>>>0)):(j+1<e&&(b=a[j+1]<<16),j+2<e&&(b|=a[j+2]<<8),j+3<e&&(b|=a[j+3]),b+=a[j]<<24>>>0);return b}}function a(a,j,c,e){e||(k("boolean"===typeof c,"missing or invalid endian"),k(void 0!==j&&null!==j,"missing offset"),k(j+1<a.length,"Trying to read beyond buffer length"));if(!(j>=a.length))return a=b(a,j,c,!0),a&32768?-1*(65535-a+1):a}function p(a,j,c,b){b||(k("boolean"===typeof c,"missing or invalid endian"),k(void 0!==j&&null!==j,"missing offset"),k(j+3<a.length,"Trying to read beyond buffer length"));
if(!(j>=a.length))return a=e(a,j,c,!0),a&2147483648?-1*(4294967295-a+1):a}function n(a,j,c,e){e||(k("boolean"===typeof c,"missing or invalid endian"),k(j+3<a.length,"Trying to read beyond buffer length"));return F.read(a,j,c,23,4)}function q(a,j,c,e){e||(k("boolean"===typeof c,"missing or invalid endian"),k(j+7<a.length,"Trying to read beyond buffer length"));return F.read(a,j,c,52,8)}function w(a,j,c,e,b){b||(k(void 0!==j&&null!==j,"missing value"),k("boolean"===typeof e,"missing or invalid endian"),
k(void 0!==c&&null!==c,"missing offset"),k(c+1<a.length,"trying to write beyond buffer length"),u(j,65535));var d=a.length;if(!(c>=d)){b=0;for(d=Math.min(d-c,2);b<d;b++)a[c+b]=(j&255<<8*(e?b:1-b))>>>8*(e?b:1-b);return c+2}}function x(a,j,c,e,b){b||(k(void 0!==j&&null!==j,"missing value"),k("boolean"===typeof e,"missing or invalid endian"),k(void 0!==c&&null!==c,"missing offset"),k(c+3<a.length,"trying to write beyond buffer length"),u(j,4294967295));var d=a.length;if(!(c>=d)){b=0;for(d=Math.min(d-
c,4);b<d;b++)a[c+b]=j>>>8*(e?b:3-b)&255;return c+4}}function y(a,j,c,b,e){e||(k(void 0!==j&&null!==j,"missing value"),k("boolean"===typeof b,"missing or invalid endian"),k(void 0!==c&&null!==c,"missing offset"),k(c+1<a.length,"Trying to write beyond buffer length"),z(j,32767,-32768));if(!(c>=a.length))return 0<=j?w(a,j,c,b,e):w(a,65535+j+1,c,b,e),c+2}function t(a,j,c,b,e){e||(k(void 0!==j&&null!==j,"missing value"),k("boolean"===typeof b,"missing or invalid endian"),k(void 0!==c&&null!==c,"missing offset"),
k(c+3<a.length,"Trying to write beyond buffer length"),z(j,2147483647,-2147483648));if(!(c>=a.length))return 0<=j?x(a,j,c,b,e):x(a,4294967295+j+1,c,b,e),c+4}function B(a,c,b,e,d){d||(k(void 0!==c&&null!==c,"missing value"),k("boolean"===typeof e,"missing or invalid endian"),k(void 0!==b&&null!==b,"missing offset"),k(b+3<a.length,"Trying to write beyond buffer length"),D(c,3.4028234663852886E38,-3.4028234663852886E38));if(!(b>=a.length))return F.write(a,c,b,e,23,4),b+4}function E(a,c,b,e,d){d||(k(void 0!==
c&&null!==c,"missing value"),k("boolean"===typeof e,"missing or invalid endian"),k(void 0!==b&&null!==b,"missing offset"),k(b+7<a.length,"Trying to write beyond buffer length"),D(c,1.7976931348623157E308,-1.7976931348623157E308));if(!(b>=a.length))return F.write(a,c,b,e,52,8),b+8}function m(a){return(Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)})(a)}function H(a){for(var c=[],b=0;b<a.length;b++){var e=a.charCodeAt(b);if(127>=e)c.push(e);else{var d=b;55296<=
e&&57343>=e&&b++;e=encodeURIComponent(a.slice(d,b+1)).substr(1).split("%");for(d=0;d<e.length;d++)c.push(parseInt(e[d],16))}}return c}function v(a,c,b,e){for(var d=0;d<e&&!(d+b>=c.length||d>=a.length);d++)c[d+b]=a[d];return d}function r(a){try{return decodeURIComponent(a)}catch(c){return String.fromCharCode(65533)}}function u(a,c){k("number"===typeof a,"cannot write a non-number as a number");k(0<=a,"specified a negative value for writing an unsigned value");k(a<=c,"value is larger than maximum value for type");
k(Math.floor(a)===a,"value has a fractional component")}function z(a,c,b){k("number"===typeof a,"cannot write a non-number as a number");k(a<=c,"value larger than maximum allowed value");k(a>=b,"value smaller than minimum allowed value");k(Math.floor(a)===a,"value has a fractional component")}function D(a,c,b){k("number"===typeof a,"cannot write a non-number as a number");k(a<=c,"value larger than maximum allowed value");k(a>=b,"value smaller than minimum allowed value")}function k(a,c){if(!a)throw Error(c||
"Failed assertion");}var G=h("base64-js"),F=h("ieee754");f.Buffer=d;f.SlowBuffer=d;f.INSPECT_MAX_BYTES=50;d.poolSize=8192;var C;try{var K=new ArrayBuffer(0),I=new Uint8Array(K);I.foo=function(){return 42};C=42===I.foo()&&"function"===typeof I.subarray&&0===(new Uint8Array(1)).subarray(1,1).byteLength}catch(L){C=!1}d.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};d.isBuffer=function(a){return!!(null!=a&&a._isBuffer)};d.byteLength=function(a,c){var b;a=a.toString();switch(c||"utf8"){case "hex":b=a.length/2;break;case "utf8":case "utf-8":b=H(a).length;break;case "ascii":case "binary":case "raw":b=a.length;break;case "base64":b=G.toByteArray(a).length;break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=2*a.length;break;default:throw Error("Unknown encoding");}return b};d.concat=function(a,c){k(m(a),"Usage: Buffer.concat(list[, length])");
if(0===a.length)return new d(0);if(1===a.length)return a[0];var b;if(void 0===c)for(b=c=0;b<a.length;b++)c+=a[b].length;var e=new d(c),g=0;for(b=0;b<a.length;b++){var f=a[b];f.copy(e,g);g+=f.length}return e};d.compare=function(a,c){k(d.isBuffer(a)&&d.isBuffer(c),"Arguments must be Buffers");for(var b=a.length,e=c.length,g=0,f=Math.min(b,e);g<f&&a[g]===c[g];g++);g!==f&&(b=a[g],e=c[g]);return b<e?-1:e<b?1:0};d.prototype.write=function(a,c,b,e){if(isFinite(c))isFinite(b)||(e=b,b=void 0);else{var d=e;
e=c;c=b;b=d}c=Number(c)||0;d=this.length-c;b?(b=Number(b),b>d&&(b=d)):b=d;e=String(e||"utf8").toLowerCase();switch(e){case "hex":e=b;c=Number(c)||0;b=this.length-c;e?(e=Number(e),e>b&&(e=b)):e=b;b=a.length;k(0===b%2,"Invalid hex string");e>b/2&&(e=b/2);for(b=0;b<e;b++)d=parseInt(a.substr(2*b,2),16),k(!isNaN(d),"Invalid hex string"),this[c+b]=d;a=b;break;case "utf8":case "utf-8":a=v(H(a),this,c,b);break;case "ascii":a=g(this,a,c,b);break;case "binary":a=g(this,a,c,b);break;case "base64":a=v(G.toByteArray(a),
this,c,b);break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=c;c=b;for(var f,d=[],p=0;p<a.length;p++)f=a.charCodeAt(p),b=f>>8,f%=256,d.push(f),d.push(b);a=v(d,this,e,c);break;default:throw Error("Unknown encoding");}return a};d.prototype.toString=function(a,b,e){a=String(a||"utf8").toLowerCase();b=Number(b)||0;e=void 0===e?this.length:Number(e);if(e===b)return"";switch(a){case "hex":a=b;b=this.length;if(!a||0>a)a=0;if(!e||0>e||e>b)e=b;for(b="";a<e;a++)b+=16>this[a]?"0"+this[a].toString(16):
this[a].toString(16);e=b;break;case "utf8":case "utf-8":var d=b;b=a="";for(e=Math.min(this.length,e);d<e;d++)127>=this[d]?(a+=r(b)+String.fromCharCode(this[d]),b=""):b+="%"+this[d].toString(16);e=a+r(b);break;case "ascii":e=c(this,b,e);break;case "binary":e=c(this,b,e);break;case "base64":a=b;e=0===a&&e===this.length?G.fromByteArray(this):G.fromByteArray(this.slice(a,e));break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=this.slice(b,e);a="";for(b=0;b<e.length;b+=2)a+=String.fromCharCode(e[b]+
256*e[b+1]);e=a;break;default:throw Error("Unknown encoding");}return e};d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};d.prototype.equals=function(a){k(d.isBuffer(a),"Argument must be a Buffer");return 0===d.compare(this,a)};d.prototype.compare=function(a){k(d.isBuffer(a),"Argument must be a Buffer");return d.compare(this,a)};d.prototype.copy=function(a,b,c,e){c||(c=0);!e&&0!==e&&(e=this.length);b||(b=0);if(e!==c&&!(0===a.length||0===this.length))if(k(e>=
c,"sourceEnd < sourceStart"),k(0<=b&&b<a.length,"targetStart out of bounds"),k(0<=c&&c<this.length,"sourceStart out of bounds"),k(0<=e&&e<=this.length,"sourceEnd out of bounds"),e>this.length&&(e=this.length),a.length-b<e-c&&(e=a.length-b+c),e-=c,100>e||!C)for(var d=0;d<e;d++)a[d+b]=this[d+c];else a._set(this.subarray(c,c+e),b)};d.prototype.slice=function(a,b){var c=this.length;a=~~a;b=void 0===b?c:~~b;0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c);0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c);b<a&&(b=a);if(C)return d._augment(this.subarray(a,
b));for(var c=b-a,e=new d(c,void 0,!0),g=0;g<c;g++)e[g]=this[g+a];return e};d.prototype.get=function(a){console.log(".get() is deprecated. Access using array indexes instead.");return this.readUInt8(a)};d.prototype.set=function(a,b){console.log(".set() is deprecated. Access using array indexes instead.");return this.writeUInt8(a,b)};d.prototype.readUInt8=function(a,b){b||(k(void 0!==a&&null!==a,"missing offset"),k(a<this.length,"Trying to read beyond buffer length"));if(!(a>=this.length))return this[a]};
d.prototype.readUInt16LE=function(a,c){return b(this,a,!0,c)};d.prototype.readUInt16BE=function(a,c){return b(this,a,!1,c)};d.prototype.readUInt32LE=function(a,b){return e(this,a,!0,b)};d.prototype.readUInt32BE=function(a,b){return e(this,a,!1,b)};d.prototype.readInt8=function(a,b){b||(k(void 0!==a&&null!==a,"missing offset"),k(a<this.length,"Trying to read beyond buffer length"));if(!(a>=this.length))return this[a]&128?-1*(255-this[a]+1):this[a]};d.prototype.readInt16LE=function(b,c){return a(this,
b,!0,c)};d.prototype.readInt16BE=function(b,c){return a(this,b,!1,c)};d.prototype.readInt32LE=function(a,b){return p(this,a,!0,b)};d.prototype.readInt32BE=function(a,b){return p(this,a,!1,b)};d.prototype.readFloatLE=function(a,b){return n(this,a,!0,b)};d.prototype.readFloatBE=function(a,b){return n(this,a,!1,b)};d.prototype.readDoubleLE=function(a,b){return q(this,a,!0,b)};d.prototype.readDoubleBE=function(a,b){return q(this,a,!1,b)};d.prototype.writeUInt8=function(a,b,c){c||(k(void 0!==a&&null!==
a,"missing value"),k(void 0!==b&&null!==b,"missing offset"),k(b<this.length,"trying to write beyond buffer length"),u(a,255));if(!(b>=this.length))return this[b]=a,b+1};d.prototype.writeUInt16LE=function(a,b,c){return w(this,a,b,!0,c)};d.prototype.writeUInt16BE=function(a,b,c){return w(this,a,b,!1,c)};d.prototype.writeUInt32LE=function(a,b,c){return x(this,a,b,!0,c)};d.prototype.writeUInt32BE=function(a,b,c){return x(this,a,b,!1,c)};d.prototype.writeInt8=function(a,b,c){c||(k(void 0!==a&&null!==a,
"missing value"),k(void 0!==b&&null!==b,"missing offset"),k(b<this.length,"Trying to write beyond buffer length"),z(a,127,-128));if(!(b>=this.length))return 0<=a?this.writeUInt8(a,b,c):this.writeUInt8(255+a+1,b,c),b+1};d.prototype.writeInt16LE=function(a,b,c){return y(this,a,b,!0,c)};d.prototype.writeInt16BE=function(a,b,c){return y(this,a,b,!1,c)};d.prototype.writeInt32LE=function(a,b,c){return t(this,a,b,!0,c)};d.prototype.writeInt32BE=function(a,b,c){return t(this,a,b,!1,c)};d.prototype.writeFloatLE=
function(a,b,c){return B(this,a,b,!0,c)};d.prototype.writeFloatBE=function(a,b,c){return B(this,a,b,!1,c)};d.prototype.writeDoubleLE=function(a,b,c){return E(this,a,b,!0,c)};d.prototype.writeDoubleBE=function(a,b,c){return E(this,a,b,!1,c)};d.prototype.fill=function(a,b,c){a||(a=0);b||(b=0);c||(c=this.length);k(c>=b,"end < start");if(c!==b&&0!==this.length){k(0<=b&&b<this.length,"start out of bounds");k(0<=c&&c<=this.length,"end out of bounds");if("number"===typeof a)for(;b<c;b++)this[b]=a;else{a=
H(a.toString());for(var e=a.length;b<c;b++)this[b]=a[b%e]}return this}};d.prototype.inspect=function(){for(var a=[],b=this.length,c=0;c<b;c++)if(a[c]=16>this[c]?"0"+this[c].toString(16):this[c].toString(16),c===f.INSPECT_MAX_BYTES){a[c+1]="...";break}return"<Buffer "+a.join(" ")+">"};d.prototype.toArrayBuffer=function(){if("undefined"!==typeof Uint8Array){if(C)return(new d(this)).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;b<c;b+=1)a[b]=this[b];return a.buffer}throw Error("Buffer.toArrayBuffer not supported in this browser");
};var s=d.prototype;d._augment=function(a){a._isBuffer=!0;a._get=a.get;a._set=a.set;a.get=s.get;a.set=s.set;a.write=s.write;a.toString=s.toString;a.toLocaleString=s.toString;a.toJSON=s.toJSON;a.equals=s.equals;a.compare=s.compare;a.copy=s.copy;a.slice=s.slice;a.readUInt8=s.readUInt8;a.readUInt16LE=s.readUInt16LE;a.readUInt16BE=s.readUInt16BE;a.readUInt32LE=s.readUInt32LE;a.readUInt32BE=s.readUInt32BE;a.readInt8=s.readInt8;a.readInt16LE=s.readInt16LE;a.readInt16BE=s.readInt16BE;a.readInt32LE=s.readInt32LE;
a.readInt32BE=s.readInt32BE;a.readFloatLE=s.readFloatLE;a.readFloatBE=s.readFloatBE;a.readDoubleLE=s.readDoubleLE;a.readDoubleBE=s.readDoubleBE;a.writeUInt8=s.writeUInt8;a.writeUInt16LE=s.writeUInt16LE;a.writeUInt16BE=s.writeUInt16BE;a.writeUInt32LE=s.writeUInt32LE;a.writeUInt32BE=s.writeUInt32BE;a.writeInt8=s.writeInt8;a.writeInt16LE=s.writeInt16LE;a.writeInt16BE=s.writeInt16BE;a.writeInt32LE=s.writeInt32LE;a.writeInt32BE=s.writeInt32BE;a.writeFloatLE=s.writeFloatLE;a.writeFloatBE=s.writeFloatBE;
a.writeDoubleLE=s.writeDoubleLE;a.writeDoubleBE=s.writeDoubleBE;a.fill=s.fill;a.inspect=s.inspect;a.toArrayBuffer=s.toArrayBuffer;return a};var J=/[^+\/0-9A-z]/g},{"base64-js":2,ieee754:3}],2:[function(h,l,f){h="undefined"===typeof f?this.base64js={}:f;var d=function(d){d=d.charCodeAt(0);if(d===c)return 62;if(d===b)return 63;if(d<e)return-1;if(d<e+10)return d-e+52;if(d<p+26)return d-p;if(d<a+26)return d-a+26},g="undefined"!==typeof Uint8Array?Uint8Array:Array,c=43,b=47,e=48,a=97,p=65;h.toByteArray=
function(a){function b(a){h[l++]=a}var c,e,f,p,h;if(0<a.length%4)throw Error("Invalid string. Length must be a multiple of 4");c=a.length;p="="===a.charAt(c-2)?2:"="===a.charAt(c-1)?1:0;h=new g(3*a.length/4-p);e=0<p?a.length-4:a.length;var l=0;for(c=0;c<e;c+=4)f=d(a.charAt(c))<<18|d(a.charAt(c+1))<<12|d(a.charAt(c+2))<<6|d(a.charAt(c+3)),b((f&16711680)>>16),b((f&65280)>>8),b(f&255);2===p?(f=d(a.charAt(c))<<2|d(a.charAt(c+1))>>4,b(f&255)):1===p&&(f=d(a.charAt(c))<<10|d(a.charAt(c+1))<<4|d(a.charAt(c+
2))>>2,b(f>>8&255),b(f&255));return h};h.fromByteArray=function(a){var b,c=a.length%3,e="",d,g;b=0;for(g=a.length-c;b<g;b+=3)d=(a[b]<<16)+(a[b+1]<<8)+a[b+2],e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d&63);switch(c){case 1:d=
a[a.length-1];e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>2);e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d<<4&63);e+="==";break;case 2:d=(a[a.length-2]<<8)+a[a.length-1],e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>10),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>4&63),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d<<2&63),e+="="}return e}},
{}],3:[function(h,l,f){f.read=function(d,g,c,b,e){var a;a=8*e-b-1;var f=(1<<a)-1,n=f>>1,q=-7;e=c?e-1:0;var w=c?-1:1,x=d[g+e];e+=w;c=x&(1<<-q)-1;x>>=-q;for(q+=a;0<q;c=256*c+d[g+e],e+=w,q-=8);a=c&(1<<-q)-1;c>>=-q;for(q+=b;0<q;a=256*a+d[g+e],e+=w,q-=8);if(0===c)c=1-n;else{if(c===f)return a?NaN:Infinity*(x?-1:1);a+=Math.pow(2,b);c-=n}return(x?-1:1)*a*Math.pow(2,c-b)};f.write=function(d,g,c,b,e,a){var f,n=8*a-e-1,q=(1<<n)-1,w=q>>1,x=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;a=b?0:a-1;var y=b?1:-1,t=0>g||
0===g&&0>1/g?1:0;g=Math.abs(g);if(isNaN(g)||Infinity===g)g=isNaN(g)?1:0,b=q;else{b=Math.floor(Math.log(g)/Math.LN2);if(1>g*(f=Math.pow(2,-b)))b--,f*=2;g=1<=b+w?g+x/f:g+x*Math.pow(2,1-w);2<=g*f&&(b++,f/=2);b+w>=q?(g=0,b=q):1<=b+w?(g=(g*f-1)*Math.pow(2,e),b+=w):(g=g*Math.pow(2,w-1)*Math.pow(2,e),b=0)}for(;8<=e;d[c+a]=g&255,a+=y,g/=256,e-=8);b=b<<e|g;for(n+=e;0<n;d[c+a]=b&255,a+=y,b/=256,n-=8);d[c+a-y]|=128*t}},{}],4:[function(h){var l=h("clone"),f=h("extend"),d=h("./utils/roles.js"),g=h("./utils/directives.js"),
c=h("./utils/class-renderer.js"),b=h("./utils/class-blocklexer.js"),e=h("./utils/class-inlinelexer.js");h=h("./utils/class-tnode.js");var a=function(e,d){var g=d?f(!0,l(a.options),d):a.options;return c.render(b.lex(e,g),g)};a.lex=function(c,e){var d=e?f(!0,l(a.options),e):a.options;return b.lex(c,d)};a.render=function(b,e){var d=e?f(!0,l(a.options),e):a.options;return c.render(b,d)};a.InlineLexer=e;a.BlockLexer=b;a.Renderer=c;a.Tnode=h;a.setDirective=function(b,c,e){if(!c||/^[ \t\f\{]|[ \t\f]$/.test(c||
""))throw Error("Directive name is invalid.");var d=typeof e;b=a.options.directives[b];"string"===d?b[c]=b[e]:"function"===d?b[c]=e:delete b[c]};a.setRole=function(b,c){if(!b||/^[ \t\f~]|[ \t\f~]$/.test(b||""))throw Error("Role name is invalid.");var e=typeof c;"string"===e?a.options.roles[b]=a.options.roles[c]:"function"===e?a.options.roles[b]=c:delete a.options.roles[b]};a.options={directives:g,roles:d,highlight:null,cwd:"./"};d=function(a){a.parentNode.remove(a)};a.setDirective("immediate","@include",
d);a.setDirective("immediate","@embed",d);window.kaj=a},{"./utils/class-blocklexer.js":5,"./utils/class-inlinelexer.js":6,"./utils/class-renderer.js":7,"./utils/class-tnode.js":8,"./utils/directives.js":9,"./utils/roles.js":11,clone:12,extend:13}],5:[function(h,l){var f=h("clone"),d=h("extend"),g=h("./helpers.js"),c=g.parseOptions,b=g.throwError,e=g.getIndent,a=g.trim,p=g.pad,n=h("./class-tnode.js"),q=function(a){var b=h("./class-inlinelexer.js"),c=h("./class-renderer.js");this.options=a;this._inlineLexer=
new b(a);this._helpers=d(f(g,!1),{clone:f,extend:d,options:this.options,blockLexer:this,inlineLexer:this._inlineLexer,Tnode:n,InlineLexer:b,BlockLexer:q,Renderer:c});this.lines=[];this.ast=new n({type:"_root_"},!0);this._markers={b_section:/^(==*)(.*)/,b_ul_item:/^([*+\-]) (.*)/,b_ol_item:/^#(\d\d*(?:\.\d\d*)*) (.*)/,b_lb_line:/^\|(?: (.*)|$)/,b_code:/^~\/\/([^ \t\f]*)(.*)/,b_oneliner:/^~\/ (.*)/,b_directive:/^\.\.(?: ([^ \t\f\{]+)\{([^{}]*)\}(.*)| (.*)|$)/,b_paragraph:null};this._directives={};this._directiveQueues=
{before:[],after:[]};for(var e in a.directives){var b=a.directives[e],p;for(p in b)this.registerDirective(e,p,b[p])}(a=this.getDirective("#section"))&&this.scheduleDirective(a)};q.lex=function(a,b){return(new q(b)).lex(a)};q.prototype.lex=function(a){this.lines=a.split(/(?:\n|\r\n?)/);a=this.tokenize(this.ast,0,0);this.lines.splice(0,a);this.executeDirective("before");var b=this._inlineLexer;this.ast.traverse(function(a){/^(?:b_paragraph|b_lb_line|_fragment_)$/.test(a.type)&&b.lex(a)});this.executeDirective("after");
return this.ast};q.prototype.tokenize=function(c,d,g,f){for(var q=this.lines,h=this._markers,m,l=q.length;d<l;d++){var v=q[d],r=e(v);if(!1===r){if("i_text"!==f)continue}else if(r<g)break;else if(r>g&&"i_text"!==f)if(f)break;else{m=new n({type:"b_indented"},!0);m.parentNode=c;d=this.tokenize(m,d,r)-1;c.addNode(m);continue}v=v.substr(g);if("i_text"===f)c.addNode(new n({type:"i_text",text:v}));else{var u;a:for(u in h)switch(m=h[u],r=null,u){case "b_section":if(r=m.exec(v)){var z=a(r[2]).replace(/ *==*$/,
"");if(" "!==r[2][0]&&z)break;if(f&&u!==f)return d;r=r[1].length;if(z){if(c.type===u&&c.size>=r)return d;m=new n({type:u,size:r},!0);m.addNode(new n({type:"b_heading",size:r,text:z}));m.parentNode=c;d=this.tokenize(m,d+1,g)-1;if(c.type===u&&1<r-c.size)for(r-=1;r>c.size;)m=new n({type:u,size:r},m),r-=1;else if(c.type!==u&&1<r)for(r-=1;0<r;)m=new n({type:u,size:r},m),r-=1;c.addNode(m)}else if(c.type===u&&c.size>r)return d;break a}break;case "b_ul_item":if(r=m.exec(v)){if(f&&u!==f)return d;"b_ul_block"===
c.type?(m=new n({type:u,mark:r[1]},!0),z=d,this.lines[z]=p(g+2)+r[2],m.parentNode=c,d=this.tokenize(m,d,g+2)-1,this.lines[z]=p(g)+v,1<m.childNodes.length&&(c.complex=!0)):(m=new n({type:"b_ul_block"},!0),m.parentNode=c,d=this.tokenize(m,d,g,u)-1);c.addNode(m);break a}break;case "b_ol_item":if(r=m.exec(v)){if(f&&u!==f)return d;if("b_ol_block"===c.type){m=new n({type:u,mark:r[1]},!0);var z=r[1].length+2,D=d;this.lines[D]=p(g+z)+r[2];m.parentNode=c;d=this.tokenize(m,d,g+z)-1;this.lines[D]=p(g)+v;1<m.childNodes.length&&
(c.complex=!0)}else m=new n({type:"b_ol_block"},!0),m.parentNode=c,d=this.tokenize(m,d,g,u)-1;c.addNode(m);break a}break;case "b_lb_line":if(r=m.exec(v)){if(f&&u!==f)return d;"b_lb_block"===c.type?m=new n({type:u,text:a(r[1]||"")}):(m=new n({type:"b_lb_block"},!0),m.parentNode=c,d=this.tokenize(m,d,g,u)-1);c.addNode(m);break a}break;case "b_code":if(r=m.exec(v)){if(f&&u!==f)return d;m=new n({type:u,lang:r[1],"class":a(r[2])},!0);m.parentNode=c;d=this.tokenize(m,d+1,g+3,"i_text")-1;m.text=m.getTextFromNodes("text",
"\n");m.childNodes=null;c.addNode(m);break a}break;case "b_oneliner":if(r=m.exec(v)){if(f&&u!==f)return d;m=new n({type:u,text:r[1]});c.addNode(m);break a}break;case "b_directive":if(r=m.exec(v)){if(f&&u!==f)return d;if(v=r[4]?"comment":r[1]||""){(z=this.getDirective(v))||b('Directive "'+v+'" does not exist.');if((this.isSameDirective(v,"header")||this.isSameDirective(v,"footer"))&&"b_section"===c.type)return d;m=new n({type:u,row:d,indent:g,queue:z.queue,name:v,args:a(r[2]||""),text:a(r[3]||r[4]||
"")},!0);"comment"===v&&r[4]&&(m.args="true",m.isImplicitComment=!0);d=this.tokenize(m,d+1,g+3,"i_text")-1;z=this.setupDirective(z,m);c.addNode(m);"immediate"===z.queue?this.executeDirective(z):this.scheduleDirective(z)}break a}break;case "b_paragraph":if(f&&u!==f)return d;m=new n({type:u,text:a(v)});c.addNode(m);break a;default:throw Error('Block element "'+u+'" does not have a handler.');}}}return d};q.prototype.setupDirective=function(a,e){var d={};e.childNodes&&e.childNodes.length&&(d=c(e.getTextFromNodes("text",
"\n")));e.text&&d.normalText&&("comment"!==a.name||!e.isImplicitComment)&&b("Each directive can not have more than one body.");"comment"!==a.name?d.normalText?e.text=d.normalText:e.isOneliner=!0:e.text+=d.normalText?"\n"+d.normalText:"";e.opts=d.options||{};e.childNodes=null;return{queue:a.queue,action:a.action.bind(null),node:e}};q.prototype.getDirective=function(a){return this._directives[a]||null};q.prototype.isSameDirective=function(a,b){return this._directives[a].action===this._directives[b].action};
q.prototype.registerDirective=function(a,b,c){this._directives[b]={name:b,queue:a,action:c}};q.prototype.scheduleDirective=function(a){"before"===a.queue&&this.setupDirective(a,new n({type:"#directive"}));this._directiveQueues[a.queue].push(a)};q.prototype.executeDirective=function(a){if("string"===typeof a){a=this._directiveQueues[a];for(var b=0,c=a.length;b<c;b++)this.executeDirective(a[b])}else a.action(a.node,this.ast,this._helpers)};l.exports=q},{"./class-inlinelexer.js":6,"./class-renderer.js":7,
"./class-tnode.js":8,"./helpers.js":10,clone:12,extend:13}],6:[function(h,l){var f=h("./helpers.js").throwError,d=h("./helpers.js").trim,g=h("./class-tnode.js"),c=function(b){this.options=b;this._markers={i_bold:["{*","*}"],i_italic:["{/","/}"],i_standout:["{%","%}"],i_code:["{`","`}"],i_keystroke:["{:",":}"],i_literal:["``","``"],i_link:["[[","]]"],i_raw:["{{","}}"],i_role:["{~","~}"],i_note:["{[","]}"],i_anchor:["{#","#}"],i_pipe:["{|","|}"]};this._markerNames="i_bold i_italic i_standout i_code i_keystroke i_literal i_link i_raw i_role i_note i_anchor i_pipe".split(" ")};
c.lex=function(b,e){return(new c(e)).lex(b)};c.prototype.lex=function(b){if(!b.childNodes&&"text"in b){b.childNodes=[];for(var c=this._markers,a=this._markerNames,p=b.text||"",n="";p;){var q=1,w=0,x=a.length;a:for(;w<x;w++){var y=a[w],t=c[y],h=t[0].length;if(p.substr(0,h)===t[0])switch(q=p.indexOf(t[1],h),0>q&&f('Inline markup "'+t[0]+'" without "'+t[1]+'".'),h=p.substring(h,q),n&&(b.addNode(new g({type:"i_text",text:n})),n=""),q=t[0].length+h.length+t[1].length,y){case "i_bold":case "i_italic":case "i_standout":case "i_literal":b.addNode(new g({type:y,
text:d(h)}));break a;case "i_code":case "i_keystroke":case "i_raw":b.addNode(new g({type:y,text:h}));break a;case "i_link":t=/^(.*?)(?:\|(.*))?$/.exec(h);b.addNode(new g({type:y,text:d(t[1]),link:d(t[2]||"")}));break a;case "i_role":t=h.indexOf("~");b.addNode(new g({type:y,name:0>t?"general":d(h.substr(0,t)),text:0>t?h:h.substr(t+1)}));break a;case "i_note":case "i_anchor":case "i_pipe":b.addNode(new g({type:y,name:d(h)}));break a;default:throw Error('Span element "'+y+'" does not have a handler.');
}}if(1===q){for(y=0;" "===p[y];y++);if(0<y)b.addNode(new g({type:"i_text",text:" "})),n="",p=p.substr(y);else if(n+=p[0],p=p.substr(1),!p||" "===p[0])b.addNode(new g({type:"i_text",text:n})),n=""}else p=p.substr(q)}b.text||b.addNode(new g({type:"i_text",text:""}));delete b.text}};l.exports=c},{"./class-tnode.js":8,"./helpers.js":10}],7:[function(h,l){var f=h("clone"),d=h("extend"),g=h("./helpers.js"),c=g.mergeClasses,b=g.trim,e=function(a){var b=h("./class-tnode.js"),c=h("./class-blocklexer.js"),
q=h("./class-inlinelexer.js");this.options=a;this._helpers=d(f(g,!1),{clone:f,extend:d,options:this.options,renderer:this,Tnode:b,InlineLexer:q,BlockLexer:c,Renderer:e})};e.escape=function(a){return a?a.replace(/["'&<>]/g,function(a){switch(a){case '"':return"&quot;";case "'":return"&#39;";case "&":return"&amp;";case "<":return"&lt;";case ">":return"&gt;";default:return a}}):""};e.getAttrId=function(a){return a?' id="'+e.escape(a)+'"':""};e.getAttrAny=function(a,c){Array.isArray(c)&&(c=c.filter(function(a){return a&&
b(a)}),"class"===a&&(c=c.map(function(a){return a.replace(/[ \t\f]+/g,"-")})),c=c.join(" "));return c?" "+a+'="'+e.escape(c)+'"':""};e.getElement=function(a,b,c,d,g,f){"object"!==typeof b&&(f=g,g=d,d=c,c=b,b={});var h="<"+a,t;for(t in b)h="id"===t?h+e.getAttrId(b[t]):h+e.getAttrAny(t,b[t]);h+=">";d||(c=c||"",h+=(f?"\n":"")+(g?c:e.escape(c))+(f?"\n":"")+"</"+a+">");return h};e.getBlock=function(a,b,c,d,g){return e.getElement(a,b,c,d,g,!0)};e.getSpan=function(a,b,c,d,g){return e.getElement(a,b,c,d,
g,!1)};e.render=function(a,b){return(new e(b)).render(a)};e.prototype.render=function(a){this._ast=a;var b="",c=this;a.traverse(function(a){var d;switch(a.type.substr(0,2)){case "b_":d=c[a.type](a,c._ast,c._helpers);a.parentNode._html=a.parentNode._html?a.parentNode._html+"\n"+d:d;delete a._html;break;case "i_":d=c[a.type](a,c._ast,c._helpers);a.parentNode._html=(a.parentNode._html||"")+d;delete a._html;break;default:if(/^[a-z][a-z]*$/.test(a.type)){d={};for(var g=Object.keys(a),f=0,h=g.length;f<
h;f++){var l=g[f];"$"===l.charAt(0)&&(d[l.substr(1)]=a[l])}f=(g=!a.isSpan)?"getBlock":"getSpan";d=a.text?e[f](a.type,d,a.text||"",a.isClosed,!1):e[f](a.type,d,a._html||"",a.isClosed,!0);if(!a.parentNode)return b=(g?"\n":"")+d,!1;a.parentNode._html=(a.parentNode._html||"")+(a.parentNode._html&&g?"\n":"")+d}else if("_fragment_"===a.type){d=a._html||"";if(!a.parentNode)return b=d,!1;a.parentNode._html=(a.parentNode._html||"")+d}else b="_root_"===a.type?(a._html||"").replace(/^\n+|\n+$/g,""):a._html||
"";delete a._html}});return b};e.prototype.b_section=function(a){return e.getBlock(1===a.size?"div":"section",{id:a.$id||a.id,"class":c("kaj-section",a.$class),style:a.$style,title:a.$title},a._html||"",!1,!0)};e.prototype.b_heading=function(a){var b=a.link?e.getSpan("a",{href:encodeURI(a.link)},a.text||""):e.getSpan("span",a.text||"");return e.getSpan(7>a.size?"h"+a.size:"p",{id:a.$id,"class":c("kaj-title",a.$class),style:a.$style,title:a.$title},b,!1,!0)};e.prototype.b_ul_item=function(a){var b=
"";switch(a.mark){case "*":b="kaj-item-x";break;case "+":b="kaj-item-y";break;case "-":b="kaj-item-z"}return e.getSpan("li",{id:a.$id,"class":c(b,a.$class),style:a.$style,title:a.$title},a._html||"",!1,!0)};e.prototype.b_ul_block=function(a){return e.getBlock("ul",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a._html||"",!1,!0)};e.prototype.b_ol_item=function(a){return e.getSpan("li",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a._html||"",!1,!0)};e.prototype.b_ol_block=function(a){return e.getBlock("ol",
{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a._html||"",!1,!0)};e.prototype.b_lb_line=function(a){return e.getSpan("div",{id:a.$id,"class":c("kaj-line",a.$class),style:a.$style,title:a.$title},a._html?a._html:e.getSpan("br","",!0),!1,!0)};e.prototype.b_lb_block=function(a){return e.getBlock("div",{id:a.$id,"class":c("kaj-line-block",a.$class),style:a.$style,title:a.$title},a._html||"",!1,!0)};e.prototype.b_code=function(a){var b,d=this.options.highlight;d&&(b=d(a.text,a.lang));return e.getBlock("pre",
{id:a.$id,"class":c(a.lang&&"lang-"+a.lang,a.class,a.$class),style:a.$style,title:a.$title},b?b:a.text,!1,!!b)};e.prototype.b_oneliner=function(a){var b,d=this.options.highlight;d&&(b=d(a.text,a.lang));return e.getSpan("pre",{id:a.$id,"class":c("kaj-oneliner",a.$class),style:a.$style,title:a.$title},b?b:a.text,!1,!!b)};e.prototype.b_paragraph=function(a){return("b_ul_item"===a.parentNode.type||"b_ol_item"===a.parentNode.type)&&!a.parentNode.parentNode.complex?a._html||"":e.getSpan("p",{id:a.$id,"class":a.$class,
style:a.$style,title:a.$title},a._html||"",!1,!0)};e.prototype.b_indented=function(a){return e.getBlock("blockquote",{id:a.$id,"class":c("kaj-indented",a.$class),style:a.$style,title:a.$title},a._html||"",!1,!0)};e.prototype.b_raw=function(a){return a.text?a.text:""};e.prototype.i_raw=function(a){return a.text||""};e.prototype.i_text=function(a){return e.escape(a.text)};e.prototype.i_bold=function(a){return e.getSpan("b",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a.text)};e.prototype.i_italic=
function(a){return e.getSpan("i",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a.text)};e.prototype.i_standout=function(a){return e.getSpan("b",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},e.getSpan("i",a.text),!1,!0)};e.prototype.i_code=function(a){return e.getSpan("code",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a.text)};e.prototype.i_keystroke=function(a){return e.getSpan("kbd",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a.text)};e.prototype.i_literal=
function(a){return e.getSpan("span",{id:a.$id,"class":c("kaj-inline-literal",a.$class),style:a.$style,title:a.$title},a.text)};e.prototype.i_link=function(a){if(a.link){var b;if(b=/^=(\d\d*(?:\.\d\d*)*)=$/.exec(a.link))a.link="#kaj-section-"+b[1].replace(/\./g,"-");else if(b=/^#(.+)#$/.exec(a.link))a.link="#kaj-anchor-def-"+b[1];else if(b=/^~(.+)~$/.exec(a.link))a.link=/^\d\d*$/.test(b[1])?"#kaj-note-def-"+b[1]:"#kaj-cite-def-"+b[1]}else a.link=a.text;return e.getSpan("a",{id:a.$id,"class":c("kaj-link-"+
("#"===a.link[0]?"internal":"external"),a.link===a.text?"kaj-link-raw":null,a.$class),style:a.$style,title:a.$title,href:encodeURI(a.link)},a.text)};e.prototype.i_anchor=function(a){return!a.name?"":e.getSpan("span",{id:a.$id||"kaj-anchor-def-"+a.name,"class":c("kaj-anchor-def",a.$class),style:a.$style,title:a.$title},"")};e.prototype.i_pipe=function(a){return!a.name?"":e.getSpan("span",{id:a.$id,"class":c("kaj-pipe",a.$class),style:a.$style,title:a.$title},a.name)};e.prototype.i_note=function(a){return!a.name?
"":/^\d\d*$/.test(a.name)?e.getSpan("a",{id:a.$id,"class":c("kaj-note-ref",a.$class),style:a.$style,title:a.$title,href:"#kaj-note-def-"+a.name},e.getSpan("sup",a.name),!1,!0):e.getSpan("a",{id:a.$id,"class":c("kaj-cite-ref",a.$class),style:a.$style,title:a.$title,href:"#kaj-cite-def-"+encodeURI(a.name)},a.name)};e.prototype.i_role=function(a){if(/^[ \t\f]*$/.test(a.name||""))return"";var b=this.options.roles;return b[a.name]?b[a.name](a,this._ast,this._helpers):e.getSpan("span",{id:a.$id,"class":c("kaj-role-"+
a.name,a.$class),style:a.$style,title:a.$title},a.text)};l.exports=e},{"./class-blocklexer.js":5,"./class-inlinelexer.js":6,"./class-tnode.js":8,"./helpers.js":10,clone:12,extend:13}],8:[function(h,l){var f=h("./helpers.js").rtrimTextBlock,d=function(g,c){this.id=this.class=this.style="";for(var b=Object.keys(g),e=0,a=b.length;e<a;e++){var f=b[e];void 0!==g[f]&&(this[f]=g[f])}this.text=this.text||"";this.$id=this.$id||"";this.$title=this.$title||"";this.$style=this.$style||"";this.$class=this.$class||
"";this.childNodes=c?[]:null;c instanceof d?this.addNode(c):Array.isArray(c)&&this.addNodes(c);this.parentNode=null};d.prototype.addNode=function(d){this.childNodes.push(d);d.parentNode=this};d.prototype.addNodes=function(d){for(var c=0,b=d.length;c<b;c++)this.addNode(d[c])};d.prototype.replaceNode=function(d,c){var b=this.childNodes.indexOf(d);0<=b&&(Array.isArray(c)?(this.insertNode(b,c),d.parentNode.removeNode(d)):(this.childNodes[b]=c,c.parentNode=this),d.parentNode=null)};d.prototype.insertNode=
function(d,c){if(Array.isArray(c)){this.childNodes.splice.apply(this.childNodes,[d,0].concat(c));for(var b=0,e=c.length;b<e;b++)c[b].parentNode=this}else this.childNodes.splice(d,0,c),c.parentNode=this};d.prototype.getNthNode=function(d){return this.childNodes[d-1]||null};d.prototype.getTextFromNodes=function(d,c){for(var b=this.childNodes||[],e=b.length,a=[],p=0;p<e;p++)a.push(b[p][d]||"");return f(a.join(c))};d.prototype.removeNode=function(d){var c=this.childNodes.indexOf(d);0<=c&&this.childNodes.splice(c,
1);d.parentNode=null};d.prototype.remove=function(){this.parentNode.removeNode(this)};d.prototype.replace=function(d){this.parentNode.replaceNode(this,d)};d.prototype.traverse=function(d,c){if(c){var b=d(this);if(!0===b||!1===b)return b;if(this.childNodes){b=[];e=this.childNodes;do{a=0;f=e.length;a:for(;a<f;a++)if(e[a]){switch(d(e[a])){case !1:return!1;case !0:continue a}e[a].childNodes&&(b=b.concat(e[a].childNodes))}e=b;b=[]}while(e.length)}}else{if(this.childNodes){var e=this.childNodes,a=0,f=e.length;
a:for(;a<f;a++)if(e[a])switch(e[a].traverse(d,c)){case !1:return!1;case !0:break a}}return d(this)}};l.exports=d},{"./helpers.js":10}],9:[function(h,l){l.exports={before:{"#section":function(f,d){var g=function(c){if(c!==this.root){if("b_section"!==c.type)return!0;if(6<c.size)return!1;var b=c.size,e=this.counters;b>e.length&&(e[b-1]=0);e[b-1]+=1;var a=e.slice(0,b).join("-");c.id="kaj-section-"+a;c.childNodes&&6>b&&c.traverse(g.bind({root:c,counters:e.slice(0,b)}),!0);return!0}};d.traverse(g.bind({root:d,
counters:[]}),!0)},role:function(f,d,g){f.parentNode.removeNode(f);d=f.args;(!d||/^[ \t\f~]|[ \t\f~]$/.test(d))&&g.throwError('Directive "role": invalid role name');var c=f.opts,b=c.wrapper||"span";/^!--|[<>\/?\x00]/.test(b)&&g.throwError('Directive "role": invalid value for option "wrapper"');var e=c.class;e&&(e=e.split(/[ \t\f]+/));g.options.roles[d]=function(a,d,f){return f.Renderer.getSpan(b,{id:c.id||a.$id,"class":f.mergeClasses(e,a.$class),style:(c.style?c.style+";":"")+a.$style,title:c.title||
a.$title},a.text)}}},immediate:{"@":function(f,d){var g=f.args,c=f.opts;if(g){g="#"+g;d[g]={};for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(d[g][b]=c[b])}f.parentNode.removeNode(f)},raw:function(f,d,g){"html"===f.args?f.parentNode.replaceNode(f,new g.Tnode({type:"b_raw",text:g.ltrimTextBlock(f.text)})):f.parentNode.removeNode(f)},comment:function(f,d,g){"true"===f.args?(d=g.ltrimTextBlock,f.parentNode.replaceNode(f,new g.Tnode({type:"b_raw",text:d(f.text).split("\n").map(function(c,b){c=
c.replace(/--\x3e/g,"- ->");return 0<b?c?"     "+c:"":"\x3c!-- "+c}).join("\n")+" --\x3e"}))):f.parentNode.removeNode(f)},"class":function(f,d,g){var c=g.Tnode;d=f.opts;var b=d.class||f.args,e=f.row+Object.keys(f.opts).length+1,a=f.indent+3,p=f.parentNode;b&&(b=b.split(/[ \t\f]+/));if(f.isOneliner)f.text=g.ltrimTextBlock(f.text),c=new c({type:"div",isSpan:!0,$id:d.id,$class:b,$style:d.style,$title:d.title},new c({type:"_fragment_",text:f.text})),p.replaceNode(f,c);else{c=new c({type:""},!0);c.parentNode=
p;g.blockLexer.tokenize(c,e,a);e=c.childNodes;a=0;for(c=e.length;a<c;a++)b&&(e[a].$class=e[a].$class?g.mergeClasses(e[a].$class,b):b),d.id&&(e[a].$id=d.id,d.id=null),d.style&&(e[a].$style+=(e[a].$style?";":"")+d.style),d.title&&(e[a].$title=d.title);p.replaceNode(f,e)}},block:function(f,d,g){d=g.Tnode;var c=f.opts,b=c.class||f.args;b&&(b=b.split(/[ \t\f]+/));b=new d({type:"div",$id:c.id,$class:b,$style:c.style,$title:c.title},!0);f.isOneliner?(f.text=g.ltrimTextBlock(f.text),b.isSpan=!0,b.addNode(new d({type:"_fragment_",
text:f.text}))):(b.parentNode=f.parentNode,g.blockLexer.tokenize(b,f.row+Object.keys(c).length+1,f.indent+3));f.parentNode.replaceNode(f,b)},header:function(f,d,g){d=g.Tnode;var c=f.opts,b=c.class;b&&(b=b.split(/[ \t\f]+/));b=new d({type:"header",$id:c.id,$class:b,$style:c.style,$title:c.title},!0);f.isOneliner?(f.text=g.ltrimTextBlock(f.text),f.text?(b.isSpan=!0,b.addNode(new d({type:"_fragment_",text:f.text})),f.parentNode.replaceNode(f,b)):f.parentNode.removeNode(f)):(b.parentNode=f.parentNode,
g.blockLexer.tokenize(b,f.row+Object.keys(c).length+1,f.indent+3),f.parentNode.replaceNode(f,b))},footer:function(f,d,g){d=g.Tnode;var c=f.opts,b=c.class;b&&(b=b.split(/[ \t\f]+/));b=new d({type:"footer",$id:c.id,$class:b,$style:c.style,$title:c.title},!0);f.isOneliner?f.text?(f.text=g.ltrimTextBlock(f.text),b.isSpan=!0,b.addNode(new d({type:"_fragment_",text:f.text})),f.parentNode.replaceNode(f,b)):f.parentNode.removeNode(f):(b.parentNode=f.parentNode,g.blockLexer.tokenize(b,f.row+Object.keys(c).length+
1,f.indent+3),f.parentNode.replaceNode(f,b))},image:function(f,d,g){d=g.Tnode;var c=g.mergeClasses,b=f.args.replace(/[ \t\f]+/g,"-"),e=g.ltrimTextBlock(f.text);g=f.opts;var a=g.class;a&&(a=a.split(/[ \t\f]+/));g.id=g.id||"";g.class=g.class||"";g.style=g.style||"";g.title=g.title||"";g.caption=g.caption||"";var p="true"===g.simple,a=b?c("kaj-image-"+b,a):a,c=new d({type:"img",isClosed:!0,$id:p?g.id:"",$class:p?a:"",$style:g.style,$title:p?g.title:"",$alt:g.alt},!1),b=encodeURI(e.split(/  */,1)[0]),
e=/ /.test(e)&&e.split(/ *,  */).map(function(a){a=a.split(/  */);a[0]=encodeURI(a[0]);return a.join(" ")}).join(", "),n,h;"true"!==g.lazyload?(n="$src",h="$srcset"):(n="$data-src",h="$data-srcset");c[n]=b;c[h]=e;g.link&&(c=new d({type:"a",isSpan:!0,$href:encodeURI(g.link)},c));p||(c=new d({type:"figure",$id:g.id,$class:a,$title:g.title},c),g.caption&&c.addNode(new d({type:"figcaption",isSpan:!0},new d({type:"_fragment_",text:g.caption}))));f.parentNode.replaceNode(f,c)},note:function(f,d,g){if(d=
f.args){var c=g.Tnode,b=g.ltrimTextBlock(f.text),e=f.opts,a=e.class;a&&(a=a.split(/[ \t\f]+/));var p=!/^\d\d*$/.test(d),n=new c({type:"_fragment_"},!0);f.isOneliner?(n.text=b,n.childNodes=null):(n.parentNode=f.parentNode,g.blockLexer.tokenize(n,f.row+Object.keys(e).length+1,f.indent+3));n=new c({type:"tr"},[new c({type:"td",isSpan:!0,$class:"kaj-label",text:"["+d+"]"}),new c({type:"td",isSpan:f.isOneliner},n)]);n=new c({type:"table",$class:g.mergeClasses("kaj-"+(p?"cite-def":"note-def"),a),$id:e.id||
"kaj-"+(p?"cite-def-":"note-def-")+encodeURI(d)},n);f.parentNode.replaceNode(f,n)}else f.parentNode.removeNode(f)},"csv-table":function(f,d,g){d=g.Tnode;var c=g.ltrimTextBlock,b=f.args,e=f.opts,a=e.class;a&&(a=a.split(/[ \t\f]+/));var p=(e.header||"").split(/[ \t]+/,2).map(function(a){return"true"===a}),n=e.delimiter||",",h=e.linebreak||!1,c=c(f.text).split("\n").map(function(a){return a.split(n)}).filter(function(a){return a.length}),b=new d({type:"table",$id:e.id,$class:a,$style:e.style,$title:e.title},
b?new d({type:"caption",isSpan:!0,text:b}):!0);h&&(h=RegExp("[ \\t]*"+h.replace(/([.\\+*?\^\[\]$(){}])/g,"\\$1")+"[ \\t]*","g"));if(p[0]){var w=!1;if(e=c.shift())for(var w=new d({type:"tr"},!0),a=0,x=e.length;a<x;a++)text=g.trim(e[a]),h&&(text=text.replace(h,"{{<br>}}")),w.addNode(new d({type:"th",isSpan:!0},new d({type:"_fragment_",text:text})));b.addNode(new d({type:"thead"},w))}w=new d({type:"tbody"},!0);a=0;for(x=c.length;a<x;a++){for(var e=c[a],l=new d({type:"tr"},!0),t=0,B=e.length;t<B;t++)text=
g.trim(e[t]),h&&(text=text.replace(h,"{{<br>}}")),l.addNode(new d({type:0===t&&p[1]?"th":"td",isSpan:!0},new d({type:"_fragment_",text:text})));w.addNode(l)}b.addNode(w);f.parentNode.replaceNode(f,b)}},after:{link:function(f,d,g){f.parentNode.removeNode(f);f.text=g.ltrimTextBlock(f.text);var c=f.args.toLowerCase(),b=f.text;if(b&&c){var e=f.opts;d.traverse(function(a){if("i_link"===a.type){if(a.link){var d=/^\{(.+)\}$/.exec(a.link);if(!d||d[1].toLowerCase()!==c)return}else if(a.text.toLowerCase()!==
c)return;a.link=b;e.id&&(a.$id=e.id,e.id=null);e.class&&((d=e.class)&&(d=d.split(/[ \t\f]+/)),a.$class=a.$class?g.mergeClasses(a.$class,d):d);e.style&&(a.$style+=(a.$style?";":"")+e.style);e.title&&(nodes.$title=e.title)}})}},"pipe-image":function(f,d,g){f.parentNode.removeNode(f);var c=f.args,b=g.ltrimTextBlock(f.text);if(c&&b){var e=f.opts;e.simple="true";d.traverse(function(a){"i_pipe"!==a.type||a.name!==c||(a.args=e.format||"",a.opts=e,a.text=b,g.options.directives.immediate.image(a,d,g))})}},
"pipe-abbr":function(f,d,g){f.parentNode.removeNode(f);var c=f.args,b=g.ltrimTextBlock(f.text);if(c&&b){var e=f.opts,a=e.class;a&&(a=a.split(/[ \t\f]+/));d.traverse(function(d){if(!("i_pipe"!==d.type||d.name!==c)){var f=new g.Tnode({type:"abbr",isSpan:!0,text:c,$title:e.title||b,$id:e.id,$class:a,$style:e.style});d.parentNode.replaceNode(d,f)}})}},"pipe-text":function(f,d,g){f.parentNode.removeNode(f);var c=f.args,b=g.ltrimTextBlock(f.text);if(c&&b){var e="raw"===f.opts.format?"i_raw":"i_text";d.traverse(function(a){if(!("i_pipe"!==
a.type||a.name!==c)){var d=new g.Tnode({type:e,text:b});a.parentNode.replaceNode(a,d)}})}},contents:function(f,d,g){var c=g.Tnode;g=f.args;var b=f.opts,e=b.class;e&&(e=e.split(/[ \t\f]+/));var a=parseInt(b.depth,10),a=1<=a&&6>=a?a:3,b=new c({type:"div",$id:b.id||"kaj-contents",$class:e,$style:b.style,$title:b.title},!0);g&&b.addNode(new c({type:"div",$class:"kaj-contents-title"},new c({type:"span",isSpan:!0,text:g})));var h=new c({type:"ul"},!0);d.traverse(function(b){if(b!==d){if("b_section"!==b.type)return!0;
if(b.size>a)return!1;if(!b.id)return!0;var e=b.size,f=b.getNthNode(1);"b_heading"!==f.type&&(f={});f.link="#kaj-contents";var e=b.id.replace(/^kaj-section-/,"").split("-",e).map(function(a){return parseInt(a,10)}),g=h.getNthNode(e[0]);g||(g=new c({type:"li"},new c({type:"a",isSpan:!0,$href:"#"+b.id,text:f.text})),h.addNode(g));for(var l,t=1,B=e.length;t<B;t++){if(!(l=g.getNthNode(2)))l=new c({type:"ul"},!0),g.addNode(l);g=l;if(!(l=g.getNthNode(e[t])))l=new c({type:"li"},new c({type:"a",isSpan:!0,
$href:"#"+b.id,text:f.text})),g.addNode(l);g=l}}},!0);h.childNodes.length?(b.addNode(h),f.parentNode.replaceNode(f,b)):f.parentNode.removeNode(f)}}}},{}],10:[function(h,l){var f=function(d){return d.replace(/^[ \t\f]+|[ \t\f]+$/g,"")};l.exports={throwError:function(d){throw Error("SyntaxError: "+d+"\n");},trim:f,ltrimTextBlock:function(d){return d.replace(/^(?: *\n)+/,"")},rtrimTextBlock:function(d){return d.replace(/(?:\n *)+$/,"")},parseOptions:function(d){var g={};d=d.split("\n");for(var c=0,b;b=
d[c];c++){var e=/^:([^:][^:]*):(.*)$/.exec(b);if(!e)break;b=e[1];e=f(e[2]);g[b]=e}return{options:g,optionText:d.slice(0,c).join("\n"),normalText:d.slice(c).join("\n")}},mergeClasses:function(){for(var d=[].slice.call(arguments),f=[],c=0,b=d.length;c<b;c++)f=f.concat(d[c]);return f},getIndent:function(d){d=d.search(/[^ ]/);return 0>d?!1:d},pad:function(d){for(var f="",c="";0<d;)c+=c||" ",1===(d&1)&&(f+=c),d>>>=1;return f}}},{}],11:[function(h,l){l.exports={general:function(f,d,g){return g.Renderer.getSpan("span",
{id:f.$id,"class":g.mergeClasses("kaj-general",f.$class),style:f.$style,title:f.$title},g.trim(f.text))}}},{}],12:[function(h,l){var f=h("buffer").Buffer,d=function(c,b,d,a){function h(c,d){if(null===c)return null;if(0==d)return c;var e;if("object"!=typeof c)return c;if(g.isArray(c))e=[];else if(g.isRegExp(c))e=RegExp(c.source,g.getRegExpFlags(c)),c.lastIndex&&(e.lastIndex=c.lastIndex);else if(g.isDate(c))e=new Date(c.getTime());else{if(l&&f.isBuffer(c))return e=new f(c.length),c.copy(e),e;e="undefined"==
typeof a?Object.create(Object.getPrototypeOf(c)):Object.create(a)}if(b){var B=n.indexOf(c);if(-1!=B)return q[B];n.push(c);q.push(e)}for(var E in c)e[E]=h(c[E],d-1);return e}var n=[],q=[],l="undefined"!=typeof f;"undefined"==typeof b&&(b=!0);"undefined"==typeof d&&(d=Infinity);return h(c,d)},g={isArray:function(c){return Array.isArray(c)||"object"===typeof c&&"[object Array]"===Object.prototype.toString.call(c)},isDate:function(c){return"object"===typeof c&&"[object Date]"===Object.prototype.toString.call(c)},
isRegExp:function(c){return"object"===typeof c&&"[object RegExp]"===Object.prototype.toString.call(c)},getRegExpFlags:function(c){var b="";c.global&&(b+="g");c.ignoreCase&&(b+="i");c.multiline&&(b+="m");return b}};"object"===typeof l&&(l.exports=d);d.clonePrototype=function(c){if(null===c)return null;var b=function(){};b.prototype=c;return new b}},{buffer:1}],13:[function(h,l){var f=Object.prototype.hasOwnProperty,d=Object.prototype.toString,g=function(c){if(!c||"[object Object]"!==d.call(c)||c.nodeType||
c.setInterval)return!1;var b=f.call(c,"constructor"),e=c.constructor&&c.constructor.prototype&&f.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!b&&!e)return!1;for(var a in c);return void 0===a||f.call(c,a)};l.exports=function b(){var d,a,f,h,q,l=arguments[0],x=1,y=arguments.length,t=!1;if("boolean"===typeof l)t=l,l=arguments[1]||{},x=2;else if("object"!==typeof l&&"function"!==typeof l||void 0==l)l={};for(;x<y;++x)if(null!=(d=arguments[x]))for(a in d)f=l[a],h=d[a],l!==h&&(t&&h&&
(g(h)||(q=Array.isArray(h)))?(q?(q=!1,f=f&&Array.isArray(f)?f:[]):f=f&&g(f)?f:{},l[a]=b(t,f,h)):void 0!==h&&(l[a]=h));return l}},{}]},{},[4]);
