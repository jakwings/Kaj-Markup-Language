(function e$$0(l,f,d){function g(b,a){if(!f[b]){if(!l[b]){var e="function"==typeof require&&require;if(!a&&e)return e(b,!0);if(c)return c(b,!0);e=Error("Cannot find module '"+b+"'");throw e.code="MODULE_NOT_FOUND",e;}e=f[b]={exports:{}};l[b][0].call(e.exports,function(a){var c=l[b][1][a];return g(c?c:a)},e,e.exports,e$$0,l,f,d)}return f[b].exports}for(var c="function"==typeof require&&require,e=0;e<d.length;e++)g(d[e]);return g})({1:[function(h,l,f){function d(a,j,A){if(!(this instanceof d))return new d(a,
j,A);var b=typeof a,c;if("number"===b)c=0<a?a>>>0:0;else if("string"===b){if("base64"===j)for(a=(a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")).replace(J,"");0!==a.length%4;)a+="=";c=d.byteLength(a,j)}else if("object"===b&&null!==a)"Buffer"===a.type&&n(a.data)&&(a=a.data),c=0<+a.length?Math.floor(+a.length):0;else throw Error("First argument needs to be a number, array or string.");var e;C?e=d._augment(new Uint8Array(c)):(e=this,e.length=c,e._isBuffer=!0);if(C&&"number"===typeof a.byteLength)e._set(a);
else if(n(a)||d.isBuffer(a)||a&&"object"===typeof a&&"number"===typeof a.length)if(d.isBuffer(a))for(j=0;j<c;j++)e[j]=a.readUInt8(j);else for(j=0;j<c;j++)e[j]=(a[j]%256+256)%256;else if("string"===b)e.write(a,0,j);else if("number"===b&&!C&&!A)for(j=0;j<c;j++)e[j]=0;return e}function g(a,j,A,c){for(var b=[],e=0;e<j.length;e++)b.push(j.charCodeAt(e)&255);return v(b,a,A,c)}function c(a,j,A){var b="";for(A=Math.min(a.length,A);j<A;j++)b+=String.fromCharCode(a[j]);return b}function e(a,j,A,b){b||(k("boolean"===
typeof A,"missing or invalid endian"),k(void 0!==j&&null!==j,"missing offset"),k(j+1<a.length,"Trying to read beyond buffer length"));b=a.length;if(!(j>=b))return A?(A=a[j],j+1<b&&(A|=a[j+1]<<8)):(A=a[j]<<8,j+1<b&&(A|=a[j+1])),A}function b(a,j,b,c){c||(k("boolean"===typeof b,"missing or invalid endian"),k(void 0!==j&&null!==j,"missing offset"),k(j+3<a.length,"Trying to read beyond buffer length"));c=a.length;if(!(j>=c)){var e;b?(j+2<c&&(e=a[j+2]<<16),j+1<c&&(e|=a[j+1]<<8),e|=a[j],j+3<c&&(e+=a[j+3]<<
24>>>0)):(j+1<c&&(e=a[j+1]<<16),j+2<c&&(e|=a[j+2]<<8),j+3<c&&(e|=a[j+3]),e+=a[j]<<24>>>0);return e}}function a(a,j,b,c){c||(k("boolean"===typeof b,"missing or invalid endian"),k(void 0!==j&&null!==j,"missing offset"),k(j+1<a.length,"Trying to read beyond buffer length"));if(!(j>=a.length))return a=e(a,j,b,!0),a&32768?-1*(65535-a+1):a}function q(a,j,c,e){e||(k("boolean"===typeof c,"missing or invalid endian"),k(void 0!==j&&null!==j,"missing offset"),k(j+3<a.length,"Trying to read beyond buffer length"));
if(!(j>=a.length))return a=b(a,j,c,!0),a&2147483648?-1*(4294967295-a+1):a}function s(a,j,b,c){c||(k("boolean"===typeof b,"missing or invalid endian"),k(j+3<a.length,"Trying to read beyond buffer length"));return F.read(a,j,b,23,4)}function m(a,j,b,c){c||(k("boolean"===typeof b,"missing or invalid endian"),k(j+7<a.length,"Trying to read beyond buffer length"));return F.read(a,j,b,52,8)}function w(a,j,b,c,e){e||(k(void 0!==j&&null!==j,"missing value"),k("boolean"===typeof c,"missing or invalid endian"),
k(void 0!==b&&null!==b,"missing offset"),k(b+1<a.length,"trying to write beyond buffer length"),u(j,65535));var d=a.length;if(!(b>=d)){e=0;for(d=Math.min(d-b,2);e<d;e++)a[b+e]=(j&255<<8*(c?e:1-e))>>>8*(c?e:1-e);return b+2}}function x(a,j,b,c,e){e||(k(void 0!==j&&null!==j,"missing value"),k("boolean"===typeof c,"missing or invalid endian"),k(void 0!==b&&null!==b,"missing offset"),k(b+3<a.length,"trying to write beyond buffer length"),u(j,4294967295));var d=a.length;if(!(b>=d)){e=0;for(d=Math.min(d-
b,4);e<d;e++)a[b+e]=j>>>8*(c?e:3-e)&255;return b+4}}function y(a,j,b,c,e){e||(k(void 0!==j&&null!==j,"missing value"),k("boolean"===typeof c,"missing or invalid endian"),k(void 0!==b&&null!==b,"missing offset"),k(b+1<a.length,"Trying to write beyond buffer length"),z(j,32767,-32768));if(!(b>=a.length))return 0<=j?w(a,j,b,c,e):w(a,65535+j+1,b,c,e),b+2}function r(a,j,b,c,e){e||(k(void 0!==j&&null!==j,"missing value"),k("boolean"===typeof c,"missing or invalid endian"),k(void 0!==b&&null!==b,"missing offset"),
k(b+3<a.length,"Trying to write beyond buffer length"),z(j,2147483647,-2147483648));if(!(b>=a.length))return 0<=j?x(a,j,b,c,e):x(a,4294967295+j+1,b,c,e),b+4}function B(a,j,b,c,e){e||(k(void 0!==j&&null!==j,"missing value"),k("boolean"===typeof c,"missing or invalid endian"),k(void 0!==b&&null!==b,"missing offset"),k(b+3<a.length,"Trying to write beyond buffer length"),D(j,3.4028234663852886E38,-3.4028234663852886E38));if(!(b>=a.length))return F.write(a,j,b,c,23,4),b+4}function E(a,b,c,e,d){d||(k(void 0!==
b&&null!==b,"missing value"),k("boolean"===typeof e,"missing or invalid endian"),k(void 0!==c&&null!==c,"missing offset"),k(c+7<a.length,"Trying to write beyond buffer length"),D(b,1.7976931348623157E308,-1.7976931348623157E308));if(!(c>=a.length))return F.write(a,b,c,e,52,8),c+8}function n(a){return(Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)})(a)}function H(a){for(var b=[],c=0;c<a.length;c++){var e=a.charCodeAt(c);if(127>=e)b.push(e);else{var d=c;55296<=
e&&57343>=e&&c++;e=encodeURIComponent(a.slice(d,c+1)).substr(1).split("%");for(d=0;d<e.length;d++)b.push(parseInt(e[d],16))}}return b}function v(a,b,c,e){for(var d=0;d<e&&!(d+c>=b.length||d>=a.length);d++)b[d+c]=a[d];return d}function p(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}function u(a,b){k("number"===typeof a,"cannot write a non-number as a number");k(0<=a,"specified a negative value for writing an unsigned value");k(a<=b,"value is larger than maximum value for type");
k(Math.floor(a)===a,"value has a fractional component")}function z(a,b,c){k("number"===typeof a,"cannot write a non-number as a number");k(a<=b,"value larger than maximum allowed value");k(a>=c,"value smaller than minimum allowed value");k(Math.floor(a)===a,"value has a fractional component")}function D(a,b,c){k("number"===typeof a,"cannot write a non-number as a number");k(a<=b,"value larger than maximum allowed value");k(a>=c,"value smaller than minimum allowed value")}function k(a,b){if(!a)throw Error(b||
"Failed assertion");}var G=h("base64-js"),F=h("ieee754");f.Buffer=d;f.SlowBuffer=d;f.INSPECT_MAX_BYTES=50;d.poolSize=8192;var C;try{var K=new ArrayBuffer(0),I=new Uint8Array(K);I.foo=function(){return 42};C=42===I.foo()&&"function"===typeof I.subarray&&0===(new Uint8Array(1)).subarray(1,1).byteLength}catch(L){C=!1}d.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};d.isBuffer=function(a){return!!(null!=a&&a._isBuffer)};d.byteLength=function(a,b){var c;a=a.toString();switch(b||"utf8"){case "hex":c=a.length/2;break;case "utf8":case "utf-8":c=H(a).length;break;case "ascii":case "binary":case "raw":c=a.length;break;case "base64":c=G.toByteArray(a).length;break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=2*a.length;break;default:throw Error("Unknown encoding");}return c};d.concat=function(a,b){k(n(a),"Usage: Buffer.concat(list[, length])");
if(0===a.length)return new d(0);if(1===a.length)return a[0];var c;if(void 0===b)for(c=b=0;c<a.length;c++)b+=a[c].length;var e=new d(b),g=0;for(c=0;c<a.length;c++){var f=a[c];f.copy(e,g);g+=f.length}return e};d.compare=function(a,b){k(d.isBuffer(a)&&d.isBuffer(b),"Arguments must be Buffers");for(var c=a.length,e=b.length,g=0,f=Math.min(c,e);g<f&&a[g]===b[g];g++);g!==f&&(c=a[g],e=b[g]);return c<e?-1:e<c?1:0};d.prototype.write=function(a,b,c,e){if(isFinite(b))isFinite(c)||(e=c,c=void 0);else{var d=e;
e=b;b=c;c=d}b=Number(b)||0;d=this.length-b;c?(c=Number(c),c>d&&(c=d)):c=d;e=String(e||"utf8").toLowerCase();switch(e){case "hex":e=c;b=Number(b)||0;c=this.length-b;e?(e=Number(e),e>c&&(e=c)):e=c;c=a.length;k(0===c%2,"Invalid hex string");e>c/2&&(e=c/2);for(c=0;c<e;c++)d=parseInt(a.substr(2*c,2),16),k(!isNaN(d),"Invalid hex string"),this[b+c]=d;a=c;break;case "utf8":case "utf-8":a=v(H(a),this,b,c);break;case "ascii":a=g(this,a,b,c);break;case "binary":a=g(this,a,b,c);break;case "base64":a=v(G.toByteArray(a),
this,b,c);break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=b;b=c;for(var f,d=[],q=0;q<a.length;q++)f=a.charCodeAt(q),c=f>>8,f%=256,d.push(f),d.push(c);a=v(d,this,e,b);break;default:throw Error("Unknown encoding");}return a};d.prototype.toString=function(a,b,e){a=String(a||"utf8").toLowerCase();b=Number(b)||0;e=void 0===e?this.length:Number(e);if(e===b)return"";switch(a){case "hex":a=b;b=this.length;if(!a||0>a)a=0;if(!e||0>e||e>b)e=b;for(b="";a<e;a++)b+=16>this[a]?"0"+this[a].toString(16):
this[a].toString(16);e=b;break;case "utf8":case "utf-8":var d=b;b=a="";for(e=Math.min(this.length,e);d<e;d++)127>=this[d]?(a+=p(b)+String.fromCharCode(this[d]),b=""):b+="%"+this[d].toString(16);e=a+p(b);break;case "ascii":e=c(this,b,e);break;case "binary":e=c(this,b,e);break;case "base64":a=b;e=0===a&&e===this.length?G.fromByteArray(this):G.fromByteArray(this.slice(a,e));break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=this.slice(b,e);a="";for(b=0;b<e.length;b+=2)a+=String.fromCharCode(e[b]+
256*e[b+1]);e=a;break;default:throw Error("Unknown encoding");}return e};d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};d.prototype.equals=function(a){k(d.isBuffer(a),"Argument must be a Buffer");return 0===d.compare(this,a)};d.prototype.compare=function(a){k(d.isBuffer(a),"Argument must be a Buffer");return d.compare(this,a)};d.prototype.copy=function(a,b,c,e){c||(c=0);!e&&0!==e&&(e=this.length);b||(b=0);if(e!==c&&!(0===a.length||0===this.length))if(k(e>=
c,"sourceEnd < sourceStart"),k(0<=b&&b<a.length,"targetStart out of bounds"),k(0<=c&&c<this.length,"sourceStart out of bounds"),k(0<=e&&e<=this.length,"sourceEnd out of bounds"),e>this.length&&(e=this.length),a.length-b<e-c&&(e=a.length-b+c),e-=c,100>e||!C)for(var d=0;d<e;d++)a[d+b]=this[d+c];else a._set(this.subarray(c,c+e),b)};d.prototype.slice=function(a,b){var c=this.length;a=~~a;b=void 0===b?c:~~b;0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c);0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c);b<a&&(b=a);if(C)return d._augment(this.subarray(a,
b));for(var c=b-a,e=new d(c,void 0,!0),g=0;g<c;g++)e[g]=this[g+a];return e};d.prototype.get=function(a){console.log(".get() is deprecated. Access using array indexes instead.");return this.readUInt8(a)};d.prototype.set=function(a,b){console.log(".set() is deprecated. Access using array indexes instead.");return this.writeUInt8(a,b)};d.prototype.readUInt8=function(a,b){b||(k(void 0!==a&&null!==a,"missing offset"),k(a<this.length,"Trying to read beyond buffer length"));if(!(a>=this.length))return this[a]};
d.prototype.readUInt16LE=function(a,b){return e(this,a,!0,b)};d.prototype.readUInt16BE=function(a,b){return e(this,a,!1,b)};d.prototype.readUInt32LE=function(a,c){return b(this,a,!0,c)};d.prototype.readUInt32BE=function(a,c){return b(this,a,!1,c)};d.prototype.readInt8=function(a,b){b||(k(void 0!==a&&null!==a,"missing offset"),k(a<this.length,"Trying to read beyond buffer length"));if(!(a>=this.length))return this[a]&128?-1*(255-this[a]+1):this[a]};d.prototype.readInt16LE=function(b,c){return a(this,
b,!0,c)};d.prototype.readInt16BE=function(b,c){return a(this,b,!1,c)};d.prototype.readInt32LE=function(a,b){return q(this,a,!0,b)};d.prototype.readInt32BE=function(a,b){return q(this,a,!1,b)};d.prototype.readFloatLE=function(a,b){return s(this,a,!0,b)};d.prototype.readFloatBE=function(a,b){return s(this,a,!1,b)};d.prototype.readDoubleLE=function(a,b){return m(this,a,!0,b)};d.prototype.readDoubleBE=function(a,b){return m(this,a,!1,b)};d.prototype.writeUInt8=function(a,b,c){c||(k(void 0!==a&&null!==
a,"missing value"),k(void 0!==b&&null!==b,"missing offset"),k(b<this.length,"trying to write beyond buffer length"),u(a,255));if(!(b>=this.length))return this[b]=a,b+1};d.prototype.writeUInt16LE=function(a,b,c){return w(this,a,b,!0,c)};d.prototype.writeUInt16BE=function(a,b,c){return w(this,a,b,!1,c)};d.prototype.writeUInt32LE=function(a,b,c){return x(this,a,b,!0,c)};d.prototype.writeUInt32BE=function(a,b,c){return x(this,a,b,!1,c)};d.prototype.writeInt8=function(a,b,c){c||(k(void 0!==a&&null!==a,
"missing value"),k(void 0!==b&&null!==b,"missing offset"),k(b<this.length,"Trying to write beyond buffer length"),z(a,127,-128));if(!(b>=this.length))return 0<=a?this.writeUInt8(a,b,c):this.writeUInt8(255+a+1,b,c),b+1};d.prototype.writeInt16LE=function(a,b,c){return y(this,a,b,!0,c)};d.prototype.writeInt16BE=function(a,b,c){return y(this,a,b,!1,c)};d.prototype.writeInt32LE=function(a,b,c){return r(this,a,b,!0,c)};d.prototype.writeInt32BE=function(a,b,c){return r(this,a,b,!1,c)};d.prototype.writeFloatLE=
function(a,b,c){return B(this,a,b,!0,c)};d.prototype.writeFloatBE=function(a,b,c){return B(this,a,b,!1,c)};d.prototype.writeDoubleLE=function(a,b,c){return E(this,a,b,!0,c)};d.prototype.writeDoubleBE=function(a,b,c){return E(this,a,b,!1,c)};d.prototype.fill=function(a,b,c){a||(a=0);b||(b=0);c||(c=this.length);k(c>=b,"end < start");if(c!==b&&0!==this.length){k(0<=b&&b<this.length,"start out of bounds");k(0<=c&&c<=this.length,"end out of bounds");if("number"===typeof a)for(;b<c;b++)this[b]=a;else{a=
H(a.toString());for(var e=a.length;b<c;b++)this[b]=a[b%e]}return this}};d.prototype.inspect=function(){for(var a=[],b=this.length,c=0;c<b;c++)if(a[c]=16>this[c]?"0"+this[c].toString(16):this[c].toString(16),c===f.INSPECT_MAX_BYTES){a[c+1]="...";break}return"<Buffer "+a.join(" ")+">"};d.prototype.toArrayBuffer=function(){if("undefined"!==typeof Uint8Array){if(C)return(new d(this)).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;b<c;b+=1)a[b]=this[b];return a.buffer}throw Error("Buffer.toArrayBuffer not supported in this browser");
};var t=d.prototype;d._augment=function(a){a._isBuffer=!0;a._get=a.get;a._set=a.set;a.get=t.get;a.set=t.set;a.write=t.write;a.toString=t.toString;a.toLocaleString=t.toString;a.toJSON=t.toJSON;a.equals=t.equals;a.compare=t.compare;a.copy=t.copy;a.slice=t.slice;a.readUInt8=t.readUInt8;a.readUInt16LE=t.readUInt16LE;a.readUInt16BE=t.readUInt16BE;a.readUInt32LE=t.readUInt32LE;a.readUInt32BE=t.readUInt32BE;a.readInt8=t.readInt8;a.readInt16LE=t.readInt16LE;a.readInt16BE=t.readInt16BE;a.readInt32LE=t.readInt32LE;
a.readInt32BE=t.readInt32BE;a.readFloatLE=t.readFloatLE;a.readFloatBE=t.readFloatBE;a.readDoubleLE=t.readDoubleLE;a.readDoubleBE=t.readDoubleBE;a.writeUInt8=t.writeUInt8;a.writeUInt16LE=t.writeUInt16LE;a.writeUInt16BE=t.writeUInt16BE;a.writeUInt32LE=t.writeUInt32LE;a.writeUInt32BE=t.writeUInt32BE;a.writeInt8=t.writeInt8;a.writeInt16LE=t.writeInt16LE;a.writeInt16BE=t.writeInt16BE;a.writeInt32LE=t.writeInt32LE;a.writeInt32BE=t.writeInt32BE;a.writeFloatLE=t.writeFloatLE;a.writeFloatBE=t.writeFloatBE;
a.writeDoubleLE=t.writeDoubleLE;a.writeDoubleBE=t.writeDoubleBE;a.fill=t.fill;a.inspect=t.inspect;a.toArrayBuffer=t.toArrayBuffer;return a};var J=/[^+\/0-9A-z]/g},{"base64-js":2,ieee754:3}],2:[function(h,l,f){h="undefined"===typeof f?this.base64js={}:f;var d=function(d){d=d.charCodeAt(0);if(d===c)return 62;if(d===e)return 63;if(d<b)return-1;if(d<b+10)return d-b+52;if(d<q+26)return d-q;if(d<a+26)return d-a+26},g="undefined"!==typeof Uint8Array?Uint8Array:Array,c=43,e=47,b=48,a=97,q=65;h.toByteArray=
function(a){function b(a){h[l++]=a}var c,e,f,q,h;if(0<a.length%4)throw Error("Invalid string. Length must be a multiple of 4");c=a.length;q="="===a.charAt(c-2)?2:"="===a.charAt(c-1)?1:0;h=new g(3*a.length/4-q);e=0<q?a.length-4:a.length;var l=0;for(c=0;c<e;c+=4)f=d(a.charAt(c))<<18|d(a.charAt(c+1))<<12|d(a.charAt(c+2))<<6|d(a.charAt(c+3)),b((f&16711680)>>16),b((f&65280)>>8),b(f&255);2===q?(f=d(a.charAt(c))<<2|d(a.charAt(c+1))>>4,b(f&255)):1===q&&(f=d(a.charAt(c))<<10|d(a.charAt(c+1))<<4|d(a.charAt(c+
2))>>2,b(f>>8&255),b(f&255));return h};h.fromByteArray=function(a){var b,c=a.length%3,e="",d,g;b=0;for(g=a.length-c;b<g;b+=3)d=(a[b]<<16)+(a[b+1]<<8)+a[b+2],e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d&63);switch(c){case 1:d=
a[a.length-1];e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>2);e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d<<4&63);e+="==";break;case 2:d=(a[a.length-2]<<8)+a[a.length-1],e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>10),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>4&63),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d<<2&63),e+="="}return e}},
{}],3:[function(h,l,f){f.read=function(d,g,c,e,b){var a;a=8*b-e-1;var f=(1<<a)-1,s=f>>1,m=-7;b=c?b-1:0;var w=c?-1:1,x=d[g+b];b+=w;c=x&(1<<-m)-1;x>>=-m;for(m+=a;0<m;c=256*c+d[g+b],b+=w,m-=8);a=c&(1<<-m)-1;c>>=-m;for(m+=e;0<m;a=256*a+d[g+b],b+=w,m-=8);if(0===c)c=1-s;else{if(c===f)return a?NaN:Infinity*(x?-1:1);a+=Math.pow(2,e);c-=s}return(x?-1:1)*a*Math.pow(2,c-e)};f.write=function(d,g,c,e,b,a){var f,s=8*a-b-1,m=(1<<s)-1,w=m>>1,x=23===b?Math.pow(2,-24)-Math.pow(2,-77):0;a=e?0:a-1;var y=e?1:-1,r=0>g||
0===g&&0>1/g?1:0;g=Math.abs(g);if(isNaN(g)||Infinity===g)g=isNaN(g)?1:0,e=m;else{e=Math.floor(Math.log(g)/Math.LN2);if(1>g*(f=Math.pow(2,-e)))e--,f*=2;g=1<=e+w?g+x/f:g+x*Math.pow(2,1-w);2<=g*f&&(e++,f/=2);e+w>=m?(g=0,e=m):1<=e+w?(g=(g*f-1)*Math.pow(2,b),e+=w):(g=g*Math.pow(2,w-1)*Math.pow(2,b),e=0)}for(;8<=b;d[c+a]=g&255,a+=y,g/=256,b-=8);e=e<<b|g;for(s+=b;0<s;d[c+a]=e&255,a+=y,e/=256,s-=8);d[c+a-y]|=128*r}},{}],4:[function(h){var l=h("clone"),f=h("extend"),d=h("./utils/roles.js"),g=h("./utils/directives.js"),
c=h("./utils/class-renderer.js"),e=h("./utils/class-blocklexer.js"),b=h("./utils/class-inlinelexer.js");h=h("./utils/class-tnode.js");var a=function(b,d){var g=d?f(!0,l(a.options),d):a.options;return c.render(e.lex(b,g),g)};a.lex=function(b,c){var d=c?f(!0,l(a.options),c):a.options;return e.lex(b,d)};a.render=function(b,e){var d=e?f(!0,l(a.options),e):a.options;return c.render(b,d)};a.InlineLexer=b;a.BlockLexer=e;a.Renderer=c;a.Tnode=h;a.setDirective=function(b,c,e){if(!c||/^[ \t\f\{]|[ \t\f]$/.test(c||
""))throw Error("Directive name is invalid.");var d=typeof e;b=a.options.directives[b];"string"===d?b[c]=b[e]:"function"===d?b[c]=e:delete b[c]};a.setRole=function(b,c){if(!b||/^[ \t\f~]|[ \t\f~]$/.test(b||""))throw Error("Role name is invalid.");var e=typeof c;"string"===e?a.options.roles[b]=a.options.roles[c]:"function"===e?a.options.roles[b]=c:delete a.options.roles[b]};a.options={directives:g,roles:d,highlight:null,cwd:"./"};d=function(a){a.parentNode.remove(a)};a.setDirective("immediate","@include",
d);a.setDirective("immediate","@embed",d);window.kaj=a},{"./utils/class-blocklexer.js":5,"./utils/class-inlinelexer.js":6,"./utils/class-renderer.js":7,"./utils/class-tnode.js":8,"./utils/directives.js":9,"./utils/roles.js":11,clone:12,extend:13}],5:[function(h,l){var f=h("clone"),d=h("extend"),g=h("./helpers.js"),c=g.parseOptions,e=g.throwError,b=g.getIndent,a=g.trim,q=g.pad,s=h("./class-tnode.js"),m=function(a){var b=h("./class-inlinelexer.js"),c=h("./class-renderer.js");this.options=a;this._inlineLexer=
new b(a);this._helpers=d(f(g,!1),{options:this.options,blockLexer:this,inlineLexer:this._inlineLexer,Tnode:s,InlineLexer:b,BlockLexer:m,Renderer:c});this._lines=[];this._ast=new s({type:"_root_"},!0);this._markers={b_section:/^(==*)(.*)/,b_ul_item:/^([*+\-]) (.*)/,b_ol_item:/^#(\d\d*(?:\.\d\d*)*) (.*)/,b_lb_line:/^\|(?: (.*)|$)/,b_code:/^~\/\/([^ \t\f]*)(.*)/,b_oneliner:/^~\/ (.*)/,b_directive:/^\.\.(?: ([^ \t\f\{]+)\{([^{}]*)\}(.*)| (.*)|$)/,b_paragraph:null};this._directives={};this._directiveQueues=
{before:[],after:[]};for(var e in a.directives){var b=a.directives[e],q;for(q in b)this.registerDirective(e,q,b[q])}(a=this.getDirective("#section"))&&this.scheduleDirective(a)};m.lex=function(a,b){return(new m(b)).lex(a)};m.prototype.lex=function(a){this._lines=a.split(/(?:\n|\r\n?)/);this.tokenize(this._ast,0,0);this.executeDirective("before");var b=this._inlineLexer;this._ast.traverse(function(a){/^(?:b_paragraph|b_lb_line|_fragment_)$/.test(a.type)&&b.lex(a)});this.executeDirective("after");return this._ast};
m.prototype.tokenize=function(c,d,g,f){for(var m=this._lines,h=this._markers,n,l=m.length;d<l;d++){var v=m[d],p=b(v);if(!1===p){if("i_text"!==f)continue}else{if(p<g)return d;if(p>g&&"i_text"!==f){if(f)return d;n=new s({type:"b_indented"},!0);d=this.tokenize(n,d,p)-1;c.addNode(n);continue}}v=v.substr(g);if("i_text"===f)c.addNode(new s({type:"i_text",text:v}));else{var u;a:for(u in h)switch(n=h[u],p=null,u){case "b_section":if(p=n.exec(v)){var z=a(p[2]).replace(/ *==*$/,"");if(" "!==p[2][0]&&z)break;
if(f&&u!==f)return d;p=p[1].length;0!==g&&e("Section marker must start at the first column.");if(z){if(c.type===u&&c.size>=p)return d;n=new s({type:u,size:p},!0);n.addNode(new s({type:"b_heading",size:p,text:z}));d=this.tokenize(n,d+1,g)-1;if(c.type===u&&1<p-c.size)for(p-=1;p>c.size;)n=new s({type:u,size:p},n),p-=1;else if(c.type!==u&&1<p)for(p-=1;0<p;)n=new s({type:u,size:p},n),p-=1;c.addNode(n)}else if(c.type===u&&c.size>p)return d;break a}break;case "b_ul_item":if(p=n.exec(v)){if(f&&u!==f)return d;
"b_ul_block"===c.type?(n=new s({type:u,mark:p[1]},!0),z=d,this._lines[z]=q(g+2)+p[2],d=this.tokenize(n,d,g+2)-1,this._lines[z]=q(g)+v,1<n.childNodes.length&&(c.complex=!0)):(n=new s({type:"b_ul_block"},!0),d=this.tokenize(n,d,g,u)-1);c.addNode(n);break a}break;case "b_ol_item":if(p=n.exec(v)){if(f&&u!==f)return d;if("b_ol_block"===c.type){n=new s({type:u,mark:p[1]},!0);var z=p[1].length+2,D=d;this._lines[D]=q(g+z)+p[2];d=this.tokenize(n,d,g+z)-1;this._lines[D]=q(g)+v;1<n.childNodes.length&&(c.complex=
!0)}else n=new s({type:"b_ol_block"},!0),d=this.tokenize(n,d,g,u)-1;c.addNode(n);break a}break;case "b_lb_line":if(p=n.exec(v)){if(f&&u!==f)return d;"b_lb_block"===c.type?n=new s({type:u,text:a(p[1]||"")}):(n=new s({type:"b_lb_block"},!0),d=this.tokenize(n,d,g,u)-1);c.addNode(n);break a}break;case "b_code":if(p=n.exec(v)){if(f&&u!==f)return d;n=new s({type:u,lang:p[1],"class":a(p[2])},!0);d=this.tokenize(n,d+1,g+3,"i_text")-1;n.text=n.getTextFromNodes("text","\n");n.childNodes=null;c.addNode(n);break a}break;
case "b_oneliner":if(p=n.exec(v)){if(f&&u!==f)return d;n=new s({type:u,text:p[1]});c.addNode(n);break a}break;case "b_directive":if(p=n.exec(v)){if(f&&u!==f)return d;if(v=p[4]?"comment":p[1]||""){(z=this.getDirective(v))||e('Directive "'+v+'" does not exist.');if(this.isSameDirective(v,"@include")||this.isSameDirective(v,"header")||this.isSameDirective(v,"footer"))if(0!==g&&e('Directive "'+v+'" must start at the first column.'),c!==this._ast)return d;n=new s({type:u,row:d,indent:g,queue:z.queue,name:v,
args:a(p[2]||""),text:a(p[3]||p[4]||"")},!0);"comment"===v&&p[4]&&(n.args="true",n.isImplicitComment=!0);d=this.tokenize(n,d+1,g+3,"i_text")-1;z=this.setupDirective(z,n);c.addNode(n);"immediate"===z.queue?this.executeDirective(z):this.scheduleDirective(z)}break a}break;case "b_paragraph":if(f&&u!==f)return d;n=new s({type:u,text:a(v)});c.addNode(n);break a;default:throw Error('Block element "'+u+'" does not have a handler.');}}}};m.prototype.setupDirective=function(a,b){var d={};b.childNodes&&b.childNodes.length&&
(d=c(b.getTextFromNodes("text","\n")));b.text&&d.normalText&&("comment"!==a.name||!b.isImplicitComment)&&e("Each directive can not have more than one body.");"comment"!==a.name?d.normalText?b.text=d.normalText:b.isOneliner=!0:b.text+=d.normalText?"\n"+d.normalText:"";b.opts=d.options||{};b.childNodes=null;return{queue:a.queue,action:a.action.bind(null),node:b}};m.prototype.getDirective=function(a){return this._directives[a]||null};m.prototype.isSameDirective=function(a,b){return this._directives[a].action===
this._directives[b].action};m.prototype.registerDirective=function(a,b,c){this._directives[b]={name:b,queue:a,action:c}};m.prototype.scheduleDirective=function(a){"before"===a.queue&&this.setupDirective(a,new s({type:"#directive"}));this._directiveQueues[a.queue].push(a)};m.prototype.executeDirective=function(a){if("string"===typeof a){a=this._directiveQueues[a];for(var b=0,c=a.length;b<c;b++)this.executeDirective(a[b])}else a.action(a.node,this._ast,this._helpers)};l.exports=m},{"./class-inlinelexer.js":6,
"./class-renderer.js":7,"./class-tnode.js":8,"./helpers.js":10,clone:12,extend:13}],6:[function(h,l){var f=h("./helpers.js").throwError,d=h("./helpers.js").trim,g=h("./class-tnode.js"),c=function(c){this.options=c;this._markers={i_bold:["{*","*}"],i_italic:["{/","/}"],i_standout:["{%","%}"],i_code:["{`","`}"],i_keystroke:["{:",":}"],i_literal:["``","``"],i_link:["[[","]]"],i_raw:["{{","}}"],i_role:["{~","~}"],i_note:["{[","]}"],i_anchor:["{#","#}"],i_pipe:["{|","|}"]};this._markerNames="i_bold i_italic i_standout i_code i_keystroke i_literal i_link i_raw i_role i_note i_anchor i_pipe".split(" ")};
c.lex=function(e,b){return(new c(b)).lex(e)};c.prototype.lex=function(c){if(!c.childNodes&&"text"in c){c.childNodes=[];for(var b=this._markers,a=this._markerNames,q=c.text||"",s="";q;){var m=1,w=0,x=a.length;a:for(;w<x;w++){var y=a[w],r=b[y],h=r[0].length;if(q.substr(0,h)===r[0])switch(m=q.indexOf(r[1],h),0>m&&f('Inline markup "'+r[0]+'" without "'+r[1]+'".'),h=q.substring(h,m),s&&(c.addNode(new g({type:"i_text",text:s})),s=""),m=r[0].length+h.length+r[1].length,y){case "i_bold":case "i_italic":case "i_standout":case "i_literal":c.addNode(new g({type:y,
text:d(h)}));break a;case "i_code":case "i_keystroke":case "i_raw":c.addNode(new g({type:y,text:h}));break a;case "i_link":r=/^(.*?)(?:\|(.*))?$/.exec(h);c.addNode(new g({type:y,text:d(r[1]),link:d(r[2]||"")}));break a;case "i_role":r=h.indexOf("~");c.addNode(new g({type:y,name:0>r?"general":d(h.substr(0,r)),text:0>r?h:h.substr(r+1)}));break a;case "i_note":case "i_anchor":case "i_pipe":c.addNode(new g({type:y,name:d(h)}));break a;default:throw Error('Span element "'+y+'" does not have a handler.');
}}if(1===m){for(y=0;" "===q[y];y++);if(0<y)c.addNode(new g({type:"i_text",text:" "})),s="",q=q.substr(y);else if(s+=q[0],q=q.substr(1),!q||" "===q[0])c.addNode(new g({type:"i_text",text:s})),s=""}else q=q.substr(m)}c.text||c.addNode(new g({type:"i_text",text:""}));delete c.text}};l.exports=c},{"./class-tnode.js":8,"./helpers.js":10}],7:[function(h,l){var f=h("clone"),d=h("extend"),g=h("./helpers.js"),c=g.mergeClasses,e=g.trim,b=function(a){var c=h("./class-tnode.js"),e=h("./class-blocklexer.js"),
m=h("./class-inlinelexer.js");this.options=a;this._helpers=d(f(g,!1),{options:this.options,renderer:this,Tnode:c,InlineLexer:m,BlockLexer:e,Renderer:b})};b.escape=function(a){return a?a.replace(/["'&<>]/g,function(a){switch(a){case '"':return"&quot;";case "'":return"&#39;";case "&":return"&amp;";case "<":return"&lt;";case ">":return"&gt;";default:return a}}):""};b.getAttrId=function(a){return a?' id="'+b.escape(a)+'"':""};b.getAttrAny=function(a,c){Array.isArray(c)&&(c=c.filter(function(a){return a&&
e(a)}),"class"===a&&(c=c.map(function(a){return a.replace(/[ \t\f]+/g,"-")})),c=c.join(" "));return c?" "+a+'="'+b.escape(c)+'"':""};b.getElement=function(a,c,e,d,g,f){"object"!==typeof c&&(f=g,g=d,d=e,e=c,c={});var h="<"+a,r;for(r in c)h="id"===r?h+b.getAttrId(c[r]):h+b.getAttrAny(r,c[r]);h+=">";d||(e=e||"",h+=(f?"\n":"")+(g?e:b.escape(e))+(f?"\n":"")+"</"+a+">");return h};b.getBlock=function(a,c,e,d,g){return b.getElement(a,c,e,d,g,!0)};b.getSpan=function(a,c,e,d,g){return b.getElement(a,c,e,d,
g,!1)};b.render=function(a,c){return(new b(c)).render(a)};b.prototype.render=function(a){this._ast=a;var c="",e=this;a.traverse(function(a){var d;switch(a.type.substr(0,2)){case "b_":d=e[a.type](a,e._ast,e._helpers);a.parentNode._html=a.parentNode._html?a.parentNode._html+"\n"+d:d;delete a._html;break;case "i_":d=e[a.type](a,e._ast,e._helpers);a.parentNode._html=(a.parentNode._html||"")+d;delete a._html;break;default:if(/^[a-z][a-z]*$/.test(a.type)){d={};for(var g=Object.keys(a),f=0,h=g.length;f<
h;f++){var l=g[f];"$"===l.charAt(0)&&(d[l.substr(1)]=a[l])}f=(g=!a.isSpan)?"getBlock":"getSpan";d=a.text?b[f](a.type,d,a.text||"",a.isClosed,!1):b[f](a.type,d,a._html||"",a.isClosed,!0);if(!a.parentNode)return c=(g?"\n":"")+d,!1;a.parentNode._html=(a.parentNode._html||"")+(a.parentNode._html&&g?"\n":"")+d}else if("_fragment_"===a.type){d=a._html||"";if(!a.parentNode)return c=d,!1;a.parentNode._html=(a.parentNode._html||"")+d}else c="_root_"===a.type?(a._html||"").replace(/^\n+|\n+$/g,""):a._html||
"";delete a._html}});return c};b.prototype.b_section=function(a){return b.getBlock(1===a.size?"div":"section",{id:a.$id||a.id,"class":c("kaj-section",a.$class),style:a.$style,title:a.$title},a._html||"",!1,!0)};b.prototype.b_heading=function(a){var e=a.link?b.getSpan("a",{href:encodeURI(a.link)},a.text||""):b.getSpan("span",a.text||"");return b.getSpan("h1",{id:a.$id,"class":c("kaj-title",a.$class),style:a.$style,title:a.$title},e,!1,!0)};b.prototype.b_ul_item=function(a){var e="";switch(a.mark){case "*":e=
"kaj-item-x";break;case "+":e="kaj-item-y";break;case "-":e="kaj-item-z"}return b.getSpan("li",{id:a.$id,"class":c(e,a.$class),style:a.$style,title:a.$title},a._html||"",!1,!0)};b.prototype.b_ul_block=function(a){return b.getBlock("ul",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a._html||"",!1,!0)};b.prototype.b_ol_item=function(a){return b.getSpan("li",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a._html||"",!1,!0)};b.prototype.b_ol_block=function(a){return b.getBlock("ol",
{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a._html||"",!1,!0)};b.prototype.b_lb_line=function(a){return b.getSpan("div",{id:a.$id,"class":c("kaj-line",a.$class),style:a.$style,title:a.$title},a._html?a._html:b.getSpan("br","",!0),!1,!0)};b.prototype.b_lb_block=function(a){return b.getBlock("div",{id:a.$id,"class":c("kaj-line-block",a.$class),style:a.$style,title:a.$title},a._html||"",!1,!0)};b.prototype.b_code=function(a){var e,d=this.options.highlight;d&&(e=d(a.text,a.lang));return b.getBlock("pre",
{id:a.$id,"class":c(a.lang&&"lang-"+a.lang,a.class,a.$class),style:a.$style,title:a.$title},e?e:a.text,!1,!!e)};b.prototype.b_oneliner=function(a){var e,d=this.options.highlight;d&&(e=d(a.text,a.lang));return b.getSpan("pre",{id:a.$id,"class":c("kaj-oneliner",a.$class),style:a.$style,title:a.$title},e?e:a.text,!1,!!e)};b.prototype.b_paragraph=function(a){return("b_ul_item"===a.parentNode.type||"b_ol_item"===a.parentNode.type)&&!a.parentNode.parentNode.complex?a._html||"":b.getSpan("p",{id:a.$id,"class":a.$class,
style:a.$style,title:a.$title},a._html||"",!1,!0)};b.prototype.b_indented=function(a){return b.getBlock("blockquote",{id:a.$id,"class":c("kaj-indented",a.$class),style:a.$style,title:a.$title},a._html||"",!1,!0)};b.prototype.b_raw=function(a){return a.text?a.text:""};b.prototype.i_raw=function(a){return a.text||""};b.prototype.i_text=function(a){return b.escape(a.text)};b.prototype.i_bold=function(a){return b.getSpan("b",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a.text)};b.prototype.i_italic=
function(a){return b.getSpan("i",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a.text)};b.prototype.i_standout=function(a){return b.getSpan("b",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},b.getSpan("i",a.text),!1,!0)};b.prototype.i_code=function(a){return b.getSpan("code",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a.text)};b.prototype.i_keystroke=function(a){return b.getSpan("kbd",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a.text)};b.prototype.i_literal=
function(a){return b.getSpan("span",{id:a.$id,"class":c("kaj-inline-literal",a.$class),style:a.$style,title:a.$title},a.text)};b.prototype.i_link=function(a){if(a.link){var e;if(e=/^=(\d\d*(?:\.\d\d*)*)=$/.exec(a.link))a.link="#kaj-section-"+e[1].replace(/\./g,"-");else if(e=/^#(.+)#$/.exec(a.link))a.link="#kaj-anchor-def-"+e[1];else if(e=/^~(.+)~$/.exec(a.link))a.link=/^\d\d*$/.test(e[1])?"#kaj-note-def-"+e[1]:"#kaj-cite-def-"+e[1]}else a.link=a.text;return b.getSpan("a",{id:a.$id,"class":c("kaj-link-"+
("#"===a.link[0]?"internal":"external"),a.link===a.text?"kaj-link-raw":null,a.$class),style:a.$style,title:a.$title,href:encodeURI(a.link)},a.text)};b.prototype.i_anchor=function(a){return!a.name?"":b.getSpan("span",{id:a.$id||"kaj-anchor-def-"+a.name,"class":c("kaj-anchor-def",a.$class),style:a.$style,title:a.$title},"")};b.prototype.i_pipe=function(a){return!a.name?"":b.getSpan("span",{id:a.$id,"class":c("kaj-pipe",a.$class),style:a.$style,title:a.$title},a.name)};b.prototype.i_note=function(a){return!a.name?
"":/^\d\d*$/.test(a.name)?b.getSpan("a",{id:a.$id,"class":c("kaj-note-ref",a.$class),style:a.$style,title:a.$title,href:"#kaj-note-def-"+a.name},b.getSpan("sup",a.name),!1,!0):b.getSpan("a",{id:a.$id,"class":c("kaj-cite-ref",a.$class),style:a.$style,title:a.$title,href:"#kaj-cite-def-"+encodeURI(a.name)},a.name)};b.prototype.i_role=function(a){if(/^[ \t\f]*$/.test(a.name||""))return"";var e=this.options.roles;return e[a.name]?e[a.name](a,this._ast,this._helpers):b.getSpan("span",{id:a.$id,"class":c("kaj-role-"+
a.name,a.$class),style:a.$style,title:a.$title},a.text)};l.exports=b},{"./class-blocklexer.js":5,"./class-inlinelexer.js":6,"./class-tnode.js":8,"./helpers.js":10,clone:12,extend:13}],8:[function(h,l){var f=h("./helpers.js").rtrimTextBlock,d=function(g,c){this.id=this.class=this.style="";for(var e=Object.keys(g),b=0,a=e.length;b<a;b++){var f=e[b];void 0!==g[f]&&(this[f]=g[f])}this.text=this.text||"";this.$id=this.$id||"";this.$title=this.$title||"";this.$style=this.$style||"";this.$class=this.$class||
"";this.childNodes=c?[]:null;c instanceof d?this.addNode(c):Array.isArray(c)&&this.addNodes(c);this.parentNode=null};d.prototype.addNode=function(d){this.childNodes.push(d);d.parentNode=this};d.prototype.addNodes=function(d){for(var c=0,e=d.length;c<e;c++)this.addNode(d[c])};d.prototype.replaceNode=function(d,c){var e=this.childNodes.indexOf(d);0<=e&&(Array.isArray(c)?(this.insertNode(e,c),d.parentNode.removeNode(d)):(this.childNodes[e]=c,c.parentNode=this),d.parentNode=null)};d.prototype.insertNode=
function(d,c){if(Array.isArray(c)){this.childNodes.splice.apply(this.childNodes,[d,0].concat(c));for(var e=0,b=c.length;e<b;e++)c[e].parentNode=this}else this.childNodes.splice(d,0,c),c.parentNode=this};d.prototype.getNthNode=function(d){return this.childNodes[d-1]||null};d.prototype.getTextFromNodes=function(d,c){for(var e=this.childNodes||[],b=e.length,a=[],q=0;q<b;q++)a.push(e[q][d]||"");return f(a.join(c))};d.prototype.removeNode=function(d){var c=this.childNodes.indexOf(d);0<=c&&this.childNodes.splice(c,
1);d.parentNode=null};d.prototype.remove=function(){this.parentNode.removeNode(this)};d.prototype.replace=function(d){this.parentNode.replaceNode(this,d)};d.prototype.traverse=function(d,c){if(c){var e=d(this);if(!0===e||!1===e)return e;if(this.childNodes){e=[];b=this.childNodes;do{a=0;f=b.length;a:for(;a<f;a++)if(b[a]){switch(d(b[a])){case !1:return!1;case !0:continue a}b[a].childNodes&&(e=e.concat(b[a].childNodes))}b=e;e=[]}while(b.length)}}else{if(this.childNodes){var b=this.childNodes,a=0,f=b.length;
a:for(;a<f;a++)if(b[a])switch(b[a].traverse(d,c)){case !1:return!1;case !0:break a}}return d(this)}};l.exports=d},{"./helpers.js":10}],9:[function(h,l){l.exports={before:{"#section":function(f,d){var g=function(c){if(c!==this.root){if("b_section"!==c.type)return!0;if(6<c.size)return!1;var e=c.size,b=this.counters;e>b.length&&(b[e-1]=0);b[e-1]+=1;var a=b.slice(0,e).join("-");c.id="kaj-section-"+a;c.childNodes&&6>e&&c.traverse(g.bind({root:c,counters:b.slice(0,e)}),!0);return!0}};d.traverse(g.bind({root:d,
counters:[]}),!0)},role:function(f,d,g){f.parentNode.removeNode(f);d=f.args;(!d||/^[ \t\f~]|[ \t\f~]$/.test(d))&&g.throwError('Directive "role": invalid role name');var c=f.opts,e=c.wrapper||"span";/^!--|[<>\/?\x00]/.test(e)&&g.throwError('Directive "role": invalid value for option "wrapper"');var b=c.class;b&&(b=b.split(/[ \t\f]+/));g.options.roles[d]=function(a,d,f){return f.Renderer.getSpan(e,{id:c.id||a.$id,"class":f.mergeClasses(b,a.$class),style:(c.style?c.style+";":"")+a.$style,title:c.title||
a.$title},a.text)}}},immediate:{"@":function(f,d){var g=f.args,c=f.opts;if(g){g="#"+g;d[g]={};for(var e in c)Object.prototype.hasOwnProperty.call(c,e)&&(d[g][e]=c[e])}f.parentNode.removeNode(f)},raw:function(f,d,g){"html"===f.args?f.parentNode.replaceNode(f,new g.Tnode({type:"b_raw",text:g.ltrimTextBlock(f.text)})):f.parentNode.removeNode(f)},comment:function(f,d,g){"true"===f.args?(d=g.ltrimTextBlock,f.parentNode.replaceNode(f,new g.Tnode({type:"b_raw",text:d(f.text).split("\n").map(function(c,e){c=
c.replace(/--\x3e/g,"- ->");return 0<e?c?"     "+c:"":"\x3c!-- "+c}).join("\n")+" --\x3e"}))):f.parentNode.removeNode(f)},"class":function(f,d,g){var c=g.Tnode;d=f.opts;var e=d.class||f.args,b=f.row+Object.keys(f.opts).length+1,a=f.indent+3;e&&(e=e.split(/[ \t\f]+/));if(f.isOneliner)f.text=g.ltrimTextBlock(f.text),c=new c({type:"div",isSpan:!0,$id:d.id,$class:e,$style:d.style,$title:d.title},new c({type:"_fragment_",text:f.text})),f.parentNode.replaceNode(f,c);else{c=new c({type:""},!0);g.blockLexer.tokenize(c,
b,a);b=c.childNodes;a=0;for(c=b.length;a<c;a++)e&&(b[a].$class=b[a].$class?g.mergeClasses(b[a].$class,e):e),d.id&&(b[a].$id=d.id,d.id=null),d.style&&(b[a].$style+=(b[a].$style?";":"")+d.style),d.title&&(b[a].$title=d.title);f.parentNode.replaceNode(f,b)}},block:function(f,d,g){d=g.Tnode;var c=f.opts,e=c.class||f.args;e&&(e=e.split(/[ \t\f]+/));e=new d({type:"div",$id:c.id,$class:e,$style:c.style,$title:c.title},!0);f.isOneliner?(f.text=g.ltrimTextBlock(f.text),e.isSpan=!0,e.addNode(new d({type:"_fragment_",
text:f.text}))):g.blockLexer.tokenize(e,f.row+Object.keys(c).length+1,f.indent+3);f.parentNode.replaceNode(f,e)},header:function(f,d,g){d=g.Tnode;var c=f.opts,e=c.class;e&&(e=e.split(/[ \t\f]+/));e=new d({type:"header",$id:c.id,$class:e,$style:c.style,$title:c.title},!0);f.isOneliner?(f.text=g.ltrimTextBlock(f.text),f.text?(e.isSpan=!0,e.addNode(new d({type:"_fragment_",text:f.text})),f.parentNode.replaceNode(f,e)):f.parentNode.removeNode(f)):(g.blockLexer.tokenize(e,f.row+Object.keys(c).length+1,
f.indent+3),f.parentNode.replaceNode(f,e))},footer:function(f,d,g){d=g.Tnode;var c=f.opts,e=c.class;e&&(e=e.split(/[ \t\f]+/));e=new d({type:"footer",$id:c.id,$class:e,$style:c.style,$title:c.title},!0);f.isOneliner?f.text?(f.text=g.ltrimTextBlock(f.text),e.isSpan=!0,e.addNode(new d({type:"_fragment_",text:f.text})),f.parentNode.replaceNode(f,e)):f.parentNode.removeNode(f):(g.blockLexer.tokenize(e,f.row+Object.keys(c).length+1,f.indent+3),f.parentNode.replaceNode(f,e))},image:function(f,d,g){d=g.Tnode;
var c=g.mergeClasses,e=f.args.replace(/[ \t\f]+/g,"-"),b=g.ltrimTextBlock(f.text);g=f.opts;var a=g.class;a&&(a=a.split(/[ \t\f]+/));g.id=g.id||"";g.class=g.class||"";g.style=g.style||"";g.title=g.title||"";g.caption=g.caption||"";var q="true"===g.simple,a=e?c("kaj-image-"+e,a):a,c=new d({type:"img",isClosed:!0,$id:q?g.id:"",$class:q?a:"",$style:g.style,$title:q?g.title:"",$alt:g.alt},!1),e=encodeURI(b.split(/  */,1)[0]),b=/ /.test(b)&&b.split(/ *,  */).map(function(a){a=a.split(/  */);a[0]=encodeURI(a[0]);
return a.join(" ")}).join(", "),s,h;"true"!==g.lazyload?(s="$src",h="$srcset"):(s="$data-src",h="$data-srcset");c[s]=e;c[h]=b;g.link&&(c=new d({type:"a",isSpan:!0,$href:encodeURI(g.link)},c));q||(c=new d({type:"figure",$id:g.id,$class:a,$title:g.title},c),g.caption&&c.addNode(new d({type:"figcaption",isSpan:!0},new d({type:"_fragment_",text:g.caption}))));f.parentNode.replaceNode(f,c)},note:function(f,d,g){if(d=f.args){var c=g.Tnode,e=g.ltrimTextBlock(f.text),b=f.opts,a=b.class;a&&(a=a.split(/[ \t\f]+/));
var q=!/^\d\d*$/.test(d),h=new c({type:"_fragment_"},!0);f.isOneliner?(h.text=e,h.childNodes=null):g.blockLexer.tokenize(h,f.row+Object.keys(b).length+1,f.indent+3);h=new c({type:"tr"},[new c({type:"td",isSpan:!0,$class:"kaj-label",text:"["+d+"]"}),new c({type:"td",isSpan:f.isOneliner},h)]);h=new c({type:"table",$class:g.mergeClasses("kaj-"+(q?"cite-def":"note-def"),a),$id:b.id||"kaj-"+(q?"cite-def-":"note-def-")+encodeURI(d)},h);f.parentNode.replaceNode(f,h)}else f.parentNode.removeNode(f)},"csv-table":function(f,
d,g){d=g.Tnode;var c=g.ltrimTextBlock,e=f.args,b=f.opts,a=b.class;a&&(a=a.split(/[ \t\f]+/));var h=(b.header||"").split(/[ \t]+/,2).map(function(a){return"true"===a}),s=b.delimiter||",",m=b.linebreak||!1,c=c(f.text).split("\n").map(function(a){return a.split(s)}).filter(function(a){return a.length}),e=new d({type:"table",$id:b.id,$class:a,$style:b.style,$title:b.title},e?new d({type:"caption",isSpan:!0,text:e}):!0);m&&(m=RegExp("[ \\t]*"+m.replace(/([.\\+*?\^\[\]$(){}])/g,"\\$1")+"[ \\t]*","g"));
if(h[0]){var w=!1;if(b=c.shift())for(var w=new d({type:"tr"},!0),a=0,x=b.length;a<x;a++)text=g.trim(b[a]),m&&(text=text.replace(m,"{{<br>}}")),w.addNode(new d({type:"th",isSpan:!0},new d({type:"_fragment_",text:text})));e.addNode(new d({type:"thead"},w))}w=new d({type:"tbody"},!0);a=0;for(x=c.length;a<x;a++){for(var b=c[a],l=new d({type:"tr"},!0),r=0,B=b.length;r<B;r++)text=g.trim(b[r]),m&&(text=text.replace(m,"{{<br>}}")),l.addNode(new d({type:0===r&&h[1]?"th":"td",isSpan:!0},new d({type:"_fragment_",
text:text})));w.addNode(l)}e.addNode(w);f.parentNode.replaceNode(f,e)}},after:{link:function(f,d,g){f.parentNode.removeNode(f);f.text=g.ltrimTextBlock(f.text);var c=f.args.toLowerCase(),e=f.text;if(e&&c){var b=f.opts;d.traverse(function(a){if("i_link"===a.type){if(a.link){var d=/^\{(.+)\}$/.exec(a.link);if(!d||d[1].toLowerCase()!==c)return}else if(a.text.toLowerCase()!==c)return;a.link=e;b.id&&(a.$id=b.id,b.id=null);b.class&&((d=b.class)&&(d=d.split(/[ \t\f]+/)),a.$class=a.$class?g.mergeClasses(a.$class,
d):d);b.style&&(a.$style+=(a.$style?";":"")+b.style);b.title&&(nodes.$title=b.title)}})}},"pipe-image":function(f,d,g){f.parentNode.removeNode(f);var c=f.args,e=g.ltrimTextBlock(f.text);if(c&&e){var b=f.opts;b.simple="true";d.traverse(function(a){"i_pipe"!==a.type||a.name!==c||(a.args=b.format||"",a.opts=b,a.text=e,g.options.directives.immediate.image(a,d,g))})}},"pipe-abbr":function(f,d,g){f.parentNode.removeNode(f);var c=f.args,e=g.ltrimTextBlock(f.text);if(c&&e){var b=f.opts,a=b.class;a&&(a=a.split(/[ \t\f]+/));
d.traverse(function(d){if(!("i_pipe"!==d.type||d.name!==c)){var f=new g.Tnode({type:"abbr",isSpan:!0,text:c,$title:b.title||e,$id:b.id,$class:a,$style:b.style});d.parentNode.replaceNode(d,f)}})}},"pipe-text":function(f,d,g){f.parentNode.removeNode(f);var c=f.args,e=g.ltrimTextBlock(f.text);if(c&&e){var b="raw"===f.opts.format?"i_raw":"i_text";d.traverse(function(a){if(!("i_pipe"!==a.type||a.name!==c)){var d=new g.Tnode({type:b,text:e});a.parentNode.replaceNode(a,d)}})}},contents:function(f,d,g){var c=
g.Tnode;g=f.args;var e=f.opts,b=e.class;b&&(b=b.split(/[ \t\f]+/));var a=parseInt(e.depth,10),a=1<=a&&6>=a?a:3,e=new c({type:"div",$id:e.id||"kaj-contents",$class:b,$style:e.style,$title:e.title},!0);g&&e.addNode(new c({type:"div",$class:"kaj-contents-title"},new c({type:"span",isSpan:!0,text:g})));var h=new c({type:"ul"},!0);d.traverse(function(b){if(b!==d){if("b_section"!==b.type)return!0;if(b.size>a)return!1;if(!b.id)return!0;var e=b.size,f=b.getNthNode(1);"b_heading"!==f.type&&(f={});f.link="#kaj-contents";
var e=b.id.replace(/^kaj-section-/,"").split("-",e).map(function(a){return parseInt(a,10)}),g=h.getNthNode(e[0]);g||(g=new c({type:"li"},new c({type:"a",isSpan:!0,$href:"#"+b.id,text:f.text})),h.addNode(g));for(var l,r=1,B=e.length;r<B;r++){if(!(l=g.getNthNode(2)))l=new c({type:"ul"},!0),g.addNode(l);g=l;if(!(l=g.getNthNode(e[r])))l=new c({type:"li"},new c({type:"a",isSpan:!0,$href:"#"+b.id,text:f.text})),g.addNode(l);g=l}}},!0);h.childNodes.length?(e.addNode(h),f.parentNode.replaceNode(f,e)):f.parentNode.removeNode(f)}}}},
{}],10:[function(h,l){var f=function(d){return d.replace(/^[ \t\f]+|[ \t\f]+$/g,"")};l.exports={throwError:function(d){throw Error("SyntaxError: "+d+"\n");},trim:f,ltrimTextBlock:function(d){return d.replace(/^(?: *\n)+/,"")},rtrimTextBlock:function(d){return d.replace(/(?:\n *)+$/,"")},parseOptions:function(d){var g={};d=d.split("\n");for(var c=0,e;e=d[c];c++){var b=/^:([^:][^:]*):(.*)$/.exec(e);if(!b)break;e=b[1];b=f(b[2]);g[e]=b}return{options:g,optionText:d.slice(0,c).join("\n"),normalText:d.slice(c).join("\n")}},
mergeClasses:function(){for(var d=[].slice.call(arguments),f=[],c=0,e=d.length;c<e;c++)f=f.concat(d[c]);return f},getIndent:function(d){d=d.search(/[^ ]/);return 0>d?!1:d},pad:function(d){for(var f="",c="";0<d;)c+=c||" ",1===(d&1)&&(f+=c),d>>>=1;return f}}},{}],11:[function(h,l){l.exports={general:function(f,d,g){return g.Renderer.getSpan("span",{id:f.$id,"class":g.mergeClasses("kaj-general",f.$class),style:f.$style,title:f.$title},g.trim(f.text))}}},{}],12:[function(h,l){var f=h("buffer").Buffer,
d=function(c,e,b,a){function d(b,c){if(null===b)return null;if(0==c)return b;var r;if("object"!=typeof b)return b;if(g.isArray(b))r=[];else if(g.isRegExp(b))r=RegExp(b.source,g.getRegExpFlags(b)),b.lastIndex&&(r.lastIndex=b.lastIndex);else if(g.isDate(b))r=new Date(b.getTime());else{if(l&&f.isBuffer(b))return r=new f(b.length),b.copy(r),r;r="undefined"==typeof a?Object.create(Object.getPrototypeOf(b)):Object.create(a)}if(e){var B=h.indexOf(b);if(-1!=B)return m[B];h.push(b);m.push(r)}for(var E in b)r[E]=
d(b[E],c-1);return r}var h=[],m=[],l="undefined"!=typeof f;"undefined"==typeof e&&(e=!0);"undefined"==typeof b&&(b=Infinity);return d(c,b)},g={isArray:function(c){return Array.isArray(c)||"object"===typeof c&&"[object Array]"===Object.prototype.toString.call(c)},isDate:function(c){return"object"===typeof c&&"[object Date]"===Object.prototype.toString.call(c)},isRegExp:function(c){return"object"===typeof c&&"[object RegExp]"===Object.prototype.toString.call(c)},getRegExpFlags:function(c){var e="";
c.global&&(e+="g");c.ignoreCase&&(e+="i");c.multiline&&(e+="m");return e}};"object"===typeof l&&(l.exports=d);d.clonePrototype=function(c){if(null===c)return null;var e=function(){};e.prototype=c;return new e}},{buffer:1}],13:[function(h,l){var f=Object.prototype.hasOwnProperty,d=Object.prototype.toString,g=function(c){if(!c||"[object Object]"!==d.call(c)||c.nodeType||c.setInterval)return!1;var e=f.call(c,"constructor"),b=c.constructor&&c.constructor.prototype&&f.call(c.constructor.prototype,"isPrototypeOf");
if(c.constructor&&!e&&!b)return!1;for(var a in c);return void 0===a||f.call(c,a)};l.exports=function e(){var b,a,d,f,h,l=arguments[0],x=1,y=arguments.length,r=!1;if("boolean"===typeof l)r=l,l=arguments[1]||{},x=2;else if("object"!==typeof l&&"function"!==typeof l||void 0==l)l={};for(;x<y;++x)if(null!=(b=arguments[x]))for(a in b)d=l[a],f=b[a],l!==f&&(r&&f&&(g(f)||(h=Array.isArray(f)))?(h?(h=!1,d=d&&Array.isArray(d)?d:[]):d=d&&g(d)?d:{},l[a]=e(r,d,f)):void 0!==f&&(l[a]=f));return l}},{}]},{},[4]);
