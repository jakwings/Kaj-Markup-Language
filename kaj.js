(function e$$0(k,f,b){function c(e,a){if(!f[e]){if(!k[e]){var g="function"==typeof require&&require;if(!a&&g)return g(e,!0);if(d)return d(e,!0);g=Error("Cannot find module '"+e+"'");throw g.code="MODULE_NOT_FOUND",g;}g=f[e]={exports:{}};k[e][0].call(g.exports,function(a){var b=k[e][1][a];return c(b?b:a)},g,g.exports,e$$0,k,f,b)}return f[e].exports}for(var d="function"==typeof require&&require,g=0;g<b.length;g++)c(b[g]);return c})({1:[function(h,k,f){function b(n,a,D){if(!(this instanceof b))return new b(n,
a,D);var e=typeof n,d;if("number"===e)d=+n;else if("string"===e)d=b.byteLength(n,a);else if("object"===e&&null!==n)"Buffer"===n.type&&E(n.data)&&(n=n.data),d=+n.length;else throw new TypeError("must start with number, buffer, array or string");if(d>w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");d=0>d?0:d>>>0;var c=this;b.TYPED_ARRAY_SUPPORT?c=b._augment(new Uint8Array(d)):(c.length=d,c._isBuffer=!0);if(b.TYPED_ARRAY_SUPPORT&&"number"===typeof n.byteLength)c._set(n);
else if(E(n)||b.isBuffer(n)||n&&"object"===typeof n&&"number"===typeof n.length)if(b.isBuffer(n))for(a=0;a<d;a++)c[a]=n.readUInt8(a);else for(a=0;a<d;a++)c[a]=(n[a]%256+256)%256;else if("string"===e)c.write(n,0,a);else if("number"===e&&!b.TYPED_ARRAY_SUPPORT&&!D)for(a=0;a<d;a++)c[a]=0;0<d&&d<=b.poolSize&&(c.parent=q);return c}function c(n,a,D){if(!(this instanceof c))return new c(n,a,D);n=new b(n,a,D);delete n.parent;return n}function d(n,a,b,e){for(var d=[],c=0;c<a.length;c++)d.push(a.charCodeAt(c)&
255);return u(d,n,b,e)}function g(n,a,b){if(0!==n%1||0>n)throw new RangeError("offset is not uint");if(n+a>b)throw new RangeError("Trying to access beyond buffer length");}function e(n,a,e,d,c,g){if(!b.isBuffer(n))throw new TypeError("buffer must be a Buffer instance");if(a>c||a<g)throw new RangeError("value is out of bounds");if(e+d>n.length)throw new RangeError("index out of range");}function a(n,a,b,e){0>a&&(a=65535+a+1);for(var d=0,c=Math.min(n.length-b,2);d<c;d++)n[b+d]=(a&255<<8*(e?d:1-d))>>>
8*(e?d:1-d)}function l(n,a,b,e){0>a&&(a=4294967295+a+1);for(var d=0,c=Math.min(n.length-b,4);d<c;d++)n[b+d]=a>>>8*(e?d:3-d)&255}function j(n,a,b,d,e,c){if(a>e||a<c)throw new RangeError("value is out of bounds");if(b+d>n.length)throw new RangeError("index out of range");if(0>b)throw new RangeError("index out of range");}function p(n,a,b,d,e){e||j(n,a,b,4,3.4028234663852886E38,-3.4028234663852886E38);m.write(n,a,b,d,23,4);return b+4}function v(n,a,b,d,e){e||j(n,a,b,8,1.7976931348623157E308,-1.7976931348623157E308);
m.write(n,a,b,d,52,8);return b+8}function y(n){n=n.trim?n.trim():n.replace(/^\s+|\s+$/g,"");n=n.replace(F,"");if(2>n.length)return"";for(;0!==n.length%4;)n+="=";return n}function s(n,a){a=a||Infinity;for(var b,d=n.length,e=null,c=[],g=0;g<d;g++){b=n.charCodeAt(g);if(55295<b&&57344>b)if(e)if(56320>b){-1<(a-=3)&&c.push(239,191,189);e=b;continue}else b=e-55296<<10|b-56320|65536,e=null;else{56319<b?-1<(a-=3)&&c.push(239,191,189):g+1===d?-1<(a-=3)&&c.push(239,191,189):e=b;continue}else e&&(-1<(a-=3)&&
c.push(239,191,189),e=null);if(128>b){if(0>(a-=1))break;c.push(b)}else if(2048>b){if(0>(a-=2))break;c.push(b>>6|192,b&63|128)}else if(65536>b){if(0>(a-=3))break;c.push(b>>12|224,b>>6&63|128,b&63|128)}else if(2097152>b){if(0>(a-=4))break;c.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw Error("Invalid code point");}return c}function u(a,b,e,d){for(var c=0;c<d&&!(c+e>=b.length||c>=a.length);c++)b[c+e]=a[c];return c}function B(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}
var C=h("base64-js"),m=h("ieee754"),E=h("is-array");f.Buffer=b;f.SlowBuffer=c;f.INSPECT_MAX_BYTES=50;b.poolSize=8192;var w=1073741823,q={};h=b;var t;try{var x=new ArrayBuffer(0),A=new Uint8Array(x);A.foo=function(){return 42};t=42===A.foo()&&"function"===typeof A.subarray&&0===(new Uint8Array(1)).subarray(1,1).byteLength}catch(G){t=!1}h.TYPED_ARRAY_SUPPORT=t;b.isBuffer=function(a){return!!(null!=a&&a._isBuffer)};b.compare=function(a,z){if(!b.isBuffer(a)||!b.isBuffer(z))throw new TypeError("Arguments must be Buffers");
if(a===z)return 0;for(var e=a.length,d=z.length,c=0,g=Math.min(e,d);c<g&&a[c]===z[c];c++);c!==g&&(e=a[c],d=z[c]);return e<d?-1:d<e?1:0};b.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};b.concat=function(a,z){if(!E(a))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===a.length)return new b(0);if(1===a.length)return a[0];
var e;if(void 0===z)for(e=z=0;e<a.length;e++)z+=a[e].length;var d=new b(z),c=0;for(e=0;e<a.length;e++){var g=a[e];g.copy(d,c);c+=g.length}return d};b.byteLength=function(a,b){var e;a+="";switch(b||"utf8"){case "ascii":case "binary":case "raw":e=a.length;break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=2*a.length;break;case "hex":e=a.length>>>1;break;case "utf8":case "utf-8":e=s(a).length;break;case "base64":e=C.toByteArray(y(a)).length;break;default:e=a.length}return e};b.prototype.length=
void 0;b.prototype.parent=void 0;b.prototype.toString=function(a,b,e){var d=!1;b>>>=0;e=void 0===e||Infinity===e?this.length:e>>>0;a||(a="utf8");0>b&&(b=0);e>this.length&&(e=this.length);if(e<=b)return"";for(;;)switch(a){case "hex":a=b;b=this.length;if(!a||0>a)a=0;if(!e||0>e||e>b)e=b;for(b="";a<e;a++)b+=16>this[a]?"0"+this[a].toString(16):this[a].toString(16);return b;case "utf8":case "utf-8":a=b;d=b="";for(e=Math.min(this.length,e);a<e;a++)127>=this[a]?(b+=B(d)+String.fromCharCode(this[a]),d=""):
d+="%"+this[a].toString(16);return b+B(d);case "ascii":a=b;b="";for(e=Math.min(this.length,e);a<e;a++)b+=String.fromCharCode(this[a]&127);return b;case "binary":a=b;b="";for(e=Math.min(this.length,e);a<e;a++)b+=String.fromCharCode(this[a]);return b;case "base64":return a=b,e=0===a&&e===this.length?C.fromByteArray(this):C.fromByteArray(this.slice(a,e)),e;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=this.slice(b,e);a="";for(b=0;b<e.length;b+=2)a+=String.fromCharCode(e[b]+256*e[b+1]);return a;
default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase();d=!0}};b.prototype.equals=function(a){if(!b.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===b.compare(this,a)};b.prototype.inspect=function(){var a="",b=f.INSPECT_MAX_BYTES;0<this.length&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... "));return"<Buffer "+a+">"};b.prototype.compare=function(a){if(!b.isBuffer(a))throw new TypeError("Argument must be a Buffer");
return this===a?0:b.compare(this,a)};b.prototype.get=function(a){console.log(".get() is deprecated. Access using array indexes instead.");return this.readUInt8(a)};b.prototype.set=function(a,b){console.log(".set() is deprecated. Access using array indexes instead.");return this.writeUInt8(a,b)};b.prototype.write=function(a,b,e,c){if(isFinite(b))isFinite(e)||(c=e,e=void 0);else{var g=c;c=b;b=e;e=g}b=Number(b)||0;if(0>e||0>b||b>this.length)throw new RangeError("attempt to write outside buffer bounds");
g=this.length-b;e?(e=Number(e),e>g&&(e=g)):e=g;c=String(c||"utf8").toLowerCase();switch(c){case "hex":c=e;e=Number(b)||0;b=this.length-e;c?(c=Number(c),c>b&&(c=b)):c=b;b=a.length;if(0!==b%2)throw Error("Invalid hex string");c>b/2&&(c=b/2);for(b=0;b<c;b++){g=parseInt(a.substr(2*b,2),16);if(isNaN(g))throw Error("Invalid hex string");this[e+b]=g}a=b;break;case "utf8":case "utf-8":c=b;a=u(s(a,this.length-c),this,c,e);break;case "ascii":a=d(this,a,b,e);break;case "binary":a=d(this,a,b,e);break;case "base64":a=
u(C.toByteArray(y(a)),this,b,e);break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=b;b=this.length-c;for(var f,v=[],l=0;l<a.length&&!(0>(b-=2));l++)f=a.charCodeAt(l),g=f>>8,f%=256,v.push(f),v.push(g);a=u(v,this,c,e);break;default:throw new TypeError("Unknown encoding: "+c);}return a};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};b.prototype.slice=function(a,e){var c=this.length;a=~~a;e=void 0===e?c:~~e;0>a?(a+=c,0>a&&(a=0)):a>
c&&(a=c);0>e?(e+=c,0>e&&(e=0)):e>c&&(e=c);e<a&&(e=a);if(b.TYPED_ARRAY_SUPPORT)c=b._augment(this.subarray(a,e));else for(var d=e-a,c=new b(d,void 0,!0),g=0;g<d;g++)c[g]=this[g+a];c.length&&(c.parent=this.parent||this);return c};b.prototype.readUIntLE=function(a,b,e){a>>>=0;b>>>=0;e||g(a,b,this.length);e=this[a];for(var c=1,d=0;++d<b&&(c*=256);)e+=this[a+d]*c;return e};b.prototype.readUIntBE=function(a,b,e){a>>>=0;b>>>=0;e||g(a,b,this.length);e=this[a+--b];for(var c=1;0<b&&(c*=256);)e+=this[a+--b]*
c;return e};b.prototype.readUInt8=function(a,b){b||g(a,1,this.length);return this[a]};b.prototype.readUInt16LE=function(a,b){b||g(a,2,this.length);return this[a]|this[a+1]<<8};b.prototype.readUInt16BE=function(a,b){b||g(a,2,this.length);return this[a]<<8|this[a+1]};b.prototype.readUInt32LE=function(a,b){b||g(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};b.prototype.readUInt32BE=function(a,b){b||g(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<
8|this[a+3])};b.prototype.readIntLE=function(a,b,e){a>>>=0;b>>>=0;e||g(a,b,this.length);e=this[a];for(var c=1,d=0;++d<b&&(c*=256);)e+=this[a+d]*c;e>=128*c&&(e-=Math.pow(2,8*b));return e};b.prototype.readIntBE=function(a,b,e){a>>>=0;b>>>=0;e||g(a,b,this.length);e=b;for(var c=1,d=this[a+--e];0<e&&(c*=256);)d+=this[a+--e]*c;d>=128*c&&(d-=Math.pow(2,8*b));return d};b.prototype.readInt8=function(a,b){b||g(a,1,this.length);return!(this[a]&128)?this[a]:-1*(255-this[a]+1)};b.prototype.readInt16LE=function(a,
b){b||g(a,2,this.length);var e=this[a]|this[a+1]<<8;return e&32768?e|4294901760:e};b.prototype.readInt16BE=function(a,b){b||g(a,2,this.length);var e=this[a+1]|this[a]<<8;return e&32768?e|4294901760:e};b.prototype.readInt32LE=function(a,b){b||g(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};b.prototype.readInt32BE=function(a,b){b||g(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};b.prototype.readFloatLE=function(a,b){b||g(a,4,this.length);return m.read(this,
a,!0,23,4)};b.prototype.readFloatBE=function(a,b){b||g(a,4,this.length);return m.read(this,a,!1,23,4)};b.prototype.readDoubleLE=function(a,b){b||g(a,8,this.length);return m.read(this,a,!0,52,8)};b.prototype.readDoubleBE=function(a,b){b||g(a,8,this.length);return m.read(this,a,!1,52,8)};b.prototype.writeUIntLE=function(a,b,c,d){a=+a;b>>>=0;c>>>=0;d||e(this,a,b,c,Math.pow(2,8*c),0);d=1;var g=0;for(this[b]=a&255;++g<c&&(d*=256);)this[b+g]=a/d>>>0&255;return b+c};b.prototype.writeUIntBE=function(a,b,
c,d){a=+a;b>>>=0;c>>>=0;d||e(this,a,b,c,Math.pow(2,8*c),0);d=c-1;var g=1;for(this[b+d]=a&255;0<=--d&&(g*=256);)this[b+d]=a/g>>>0&255;return b+c};b.prototype.writeUInt8=function(a,c,d){a=+a;c>>>=0;d||e(this,a,c,1,255,0);b.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));this[c]=a;return c+1};b.prototype.writeUInt16LE=function(c,d,g){c=+c;d>>>=0;g||e(this,c,d,2,65535,0);b.TYPED_ARRAY_SUPPORT?(this[d]=c,this[d+1]=c>>>8):a(this,c,d,!0);return d+2};b.prototype.writeUInt16BE=function(c,d,g){c=+c;d>>>=0;g||e(this,
c,d,2,65535,0);b.TYPED_ARRAY_SUPPORT?(this[d]=c>>>8,this[d+1]=c):a(this,c,d,!1);return d+2};b.prototype.writeUInt32LE=function(a,c,d){a=+a;c>>>=0;d||e(this,a,c,4,4294967295,0);b.TYPED_ARRAY_SUPPORT?(this[c+3]=a>>>24,this[c+2]=a>>>16,this[c+1]=a>>>8,this[c]=a):l(this,a,c,!0);return c+4};b.prototype.writeUInt32BE=function(a,c,d){a=+a;c>>>=0;d||e(this,a,c,4,4294967295,0);b.TYPED_ARRAY_SUPPORT?(this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a):l(this,a,c,!1);return c+4};b.prototype.writeIntLE=
function(a,b,c,d){a=+a;b>>>=0;d||e(this,a,b,c,Math.pow(2,8*c-1)-1,-Math.pow(2,8*c-1));d=0;var g=1,f=0>a?1:0;for(this[b]=a&255;++d<c&&(g*=256);)this[b+d]=(a/g>>0)-f&255;return b+c};b.prototype.writeIntBE=function(a,b,c,d){a=+a;b>>>=0;d||e(this,a,b,c,Math.pow(2,8*c-1)-1,-Math.pow(2,8*c-1));d=c-1;var g=1,f=0>a?1:0;for(this[b+d]=a&255;0<=--d&&(g*=256);)this[b+d]=(a/g>>0)-f&255;return b+c};b.prototype.writeInt8=function(a,c,d){a=+a;c>>>=0;d||e(this,a,c,1,127,-128);b.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));
0>a&&(a=255+a+1);this[c]=a;return c+1};b.prototype.writeInt16LE=function(c,d,g){c=+c;d>>>=0;g||e(this,c,d,2,32767,-32768);b.TYPED_ARRAY_SUPPORT?(this[d]=c,this[d+1]=c>>>8):a(this,c,d,!0);return d+2};b.prototype.writeInt16BE=function(c,d,g){c=+c;d>>>=0;g||e(this,c,d,2,32767,-32768);b.TYPED_ARRAY_SUPPORT?(this[d]=c>>>8,this[d+1]=c):a(this,c,d,!1);return d+2};b.prototype.writeInt32LE=function(a,c,d){a=+a;c>>>=0;d||e(this,a,c,4,2147483647,-2147483648);b.TYPED_ARRAY_SUPPORT?(this[c]=a,this[c+1]=a>>>8,
this[c+2]=a>>>16,this[c+3]=a>>>24):l(this,a,c,!0);return c+4};b.prototype.writeInt32BE=function(a,c,d){a=+a;c>>>=0;d||e(this,a,c,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);b.TYPED_ARRAY_SUPPORT?(this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a):l(this,a,c,!1);return c+4};b.prototype.writeFloatLE=function(a,b,c){return p(this,a,b,!0,c)};b.prototype.writeFloatBE=function(a,b,c){return p(this,a,b,!1,c)};b.prototype.writeDoubleLE=function(a,b,c){return v(this,a,b,!0,c)};b.prototype.writeDoubleBE=
function(a,b,c){return v(this,a,b,!1,c)};b.prototype.copy=function(a,c,e,d){e||(e=0);!d&&0!==d&&(d=this.length);c>=a.length&&(c=a.length);c||(c=0);0<d&&d<e&&(d=e);if(d===e||0===a.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>e||e>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);a.length-c<d-e&&(d=a.length-c+e);d-=e;if(1E3>d||!b.TYPED_ARRAY_SUPPORT)for(var g=
0;g<d;g++)a[g+c]=this[g+e];else a._set(this.subarray(e,e+d),c);return d};b.prototype.fill=function(a,b,c){a||(a=0);b||(b=0);c||(c=this.length);if(c<b)throw new RangeError("end < start");if(c!==b&&0!==this.length){if(0>b||b>=this.length)throw new RangeError("start out of bounds");if(0>c||c>this.length)throw new RangeError("end out of bounds");if("number"===typeof a)for(;b<c;b++)this[b]=a;else{a=s(a.toString());for(var e=a.length;b<c;b++)this[b]=a[b%e]}return this}};b.prototype.toArrayBuffer=function(){if("undefined"!==
typeof Uint8Array){if(b.TYPED_ARRAY_SUPPORT)return(new b(this)).buffer;for(var a=new Uint8Array(this.length),c=0,e=a.length;c<e;c+=1)a[c]=this[c];return a.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser");};var r=b.prototype;b._augment=function(a){a.constructor=b;a._isBuffer=!0;a._get=a.get;a._set=a.set;a.get=r.get;a.set=r.set;a.write=r.write;a.toString=r.toString;a.toLocaleString=r.toString;a.toJSON=r.toJSON;a.equals=r.equals;a.compare=r.compare;a.copy=r.copy;a.slice=
r.slice;a.readUIntLE=r.readUIntLE;a.readUIntBE=r.readUIntBE;a.readUInt8=r.readUInt8;a.readUInt16LE=r.readUInt16LE;a.readUInt16BE=r.readUInt16BE;a.readUInt32LE=r.readUInt32LE;a.readUInt32BE=r.readUInt32BE;a.readIntLE=r.readIntLE;a.readIntBE=r.readIntBE;a.readInt8=r.readInt8;a.readInt16LE=r.readInt16LE;a.readInt16BE=r.readInt16BE;a.readInt32LE=r.readInt32LE;a.readInt32BE=r.readInt32BE;a.readFloatLE=r.readFloatLE;a.readFloatBE=r.readFloatBE;a.readDoubleLE=r.readDoubleLE;a.readDoubleBE=r.readDoubleBE;
a.writeUInt8=r.writeUInt8;a.writeUIntLE=r.writeUIntLE;a.writeUIntBE=r.writeUIntBE;a.writeUInt16LE=r.writeUInt16LE;a.writeUInt16BE=r.writeUInt16BE;a.writeUInt32LE=r.writeUInt32LE;a.writeUInt32BE=r.writeUInt32BE;a.writeIntLE=r.writeIntLE;a.writeIntBE=r.writeIntBE;a.writeInt8=r.writeInt8;a.writeInt16LE=r.writeInt16LE;a.writeInt16BE=r.writeInt16BE;a.writeInt32LE=r.writeInt32LE;a.writeInt32BE=r.writeInt32BE;a.writeFloatLE=r.writeFloatLE;a.writeFloatBE=r.writeFloatBE;a.writeDoubleLE=r.writeDoubleLE;a.writeDoubleBE=
r.writeDoubleBE;a.fill=r.fill;a.inspect=r.inspect;a.toArrayBuffer=r.toArrayBuffer;return a};var F=/[^+\/0-9A-z\-]/g},{"base64-js":2,ieee754:3,"is-array":4}],2:[function(h,k,f){h="undefined"===typeof f?this.base64js={}:f;var b=function(b){b=b.charCodeAt(0);if(b===d||b===j)return 62;if(b===g||b===p)return 63;if(b<e)return-1;if(b<e+10)return b-e+52;if(b<l+26)return b-l;if(b<a+26)return b-a+26},c="undefined"!==typeof Uint8Array?Uint8Array:Array,d=43,g=47,e=48,a=97,l=65,j=45,p=95;h.toByteArray=function(a){function e(a){j[p++]=
a}var d,g,f,l,j;if(0<a.length%4)throw Error("Invalid string. Length must be a multiple of 4");d=a.length;l="="===a.charAt(d-2)?2:"="===a.charAt(d-1)?1:0;j=new c(3*a.length/4-l);g=0<l?a.length-4:a.length;var p=0;for(d=0;d<g;d+=4)f=b(a.charAt(d))<<18|b(a.charAt(d+1))<<12|b(a.charAt(d+2))<<6|b(a.charAt(d+3)),e((f&16711680)>>16),e((f&65280)>>8),e(f&255);2===l?(f=b(a.charAt(d))<<2|b(a.charAt(d+1))>>4,e(f&255)):1===l&&(f=b(a.charAt(d))<<10|b(a.charAt(d+1))<<4|b(a.charAt(d+2))>>2,e(f>>8&255),e(f&255));return j};
h.fromByteArray=function(a){var b,c=a.length%3,e="",d,g;b=0;for(g=a.length-c;b<g;b+=3)d=(a[b]<<16)+(a[b+1]<<8)+a[b+2],e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d&63);switch(c){case 1:d=a[a.length-1];e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>
2);e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d<<4&63);e+="==";break;case 2:d=(a[a.length-2]<<8)+a[a.length-1],e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>10),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>4&63),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d<<2&63),e+="="}return e}},{}],3:[function(h,k,f){f.read=function(b,c,d,g,e){var a;a=8*e-g-1;var f=(1<<a)-1,j=
f>>1,p=-7;e=d?e-1:0;var v=d?-1:1,y=b[c+e];e+=v;d=y&(1<<-p)-1;y>>=-p;for(p+=a;0<p;d=256*d+b[c+e],e+=v,p-=8);a=d&(1<<-p)-1;d>>=-p;for(p+=g;0<p;a=256*a+b[c+e],e+=v,p-=8);if(0===d)d=1-j;else{if(d===f)return a?NaN:Infinity*(y?-1:1);a+=Math.pow(2,g);d-=j}return(y?-1:1)*a*Math.pow(2,d-g)};f.write=function(b,c,d,g,e,a){var f,j=8*a-e-1,p=(1<<j)-1,v=p>>1,y=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;a=g?0:a-1;var s=g?1:-1,u=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);if(isNaN(c)||Infinity===c)c=isNaN(c)?1:0,g=p;else{g=
Math.floor(Math.log(c)/Math.LN2);if(1>c*(f=Math.pow(2,-g)))g--,f*=2;c=1<=g+v?c+y/f:c+y*Math.pow(2,1-v);2<=c*f&&(g++,f/=2);g+v>=p?(c=0,g=p):1<=g+v?(c=(c*f-1)*Math.pow(2,e),g+=v):(c=c*Math.pow(2,v-1)*Math.pow(2,e),g=0)}for(;8<=e;b[d+a]=c&255,a+=s,c/=256,e-=8);g=g<<e|c;for(j+=e;0<j;b[d+a]=g&255,a+=s,g/=256,j-=8);b[d+a-s]|=128*u}},{}],4:[function(h,k){var f=Object.prototype.toString;k.exports=Array.isArray||function(b){return!!b&&"[object Array]"==f.call(b)}},{}],5:[function(h){var k=h("clone"),f=h("extend"),
b=h("./utils/roles.js"),c=h("./utils/directives.js"),d=h("./utils/class-renderer.js"),g=h("./utils/class-blocklexer.js"),e=h("./utils/class-inlinelexer.js");h=h("./utils/class-tnode.js");var a=function(b,c){var e=c?f(!0,k(a.options),c):a.options;return d.render(g.lex(b,e),e)};a.lex=function(b,c){var e=c?f(!0,k(a.options),c):a.options;return g.lex(b,e)};a.render=function(b,c){var e=c?f(!0,k(a.options),c):a.options;return d.render(b,e)};a.InlineLexer=e;a.BlockLexer=g;a.Renderer=d;a.Tnode=h;a.setDirective=
function(b,c,e){if(!c||/^[ \t\f\{]|[ \t\f]$/.test(c||""))throw Error("Directive name is invalid.");var d=typeof e;b=a.options.directives[b];"string"===d?b[c]=b[e]:"function"===d?b[c]=e:delete b[c]};a.setRole=function(b,c){if(!b||/^[ \t\f~]|[ \t\f~]$/.test(b||""))throw Error("Role name is invalid.");var e=typeof c;"string"===e?a.options.roles[b]=a.options.roles[c]:"function"===e?a.options.roles[b]=c:delete a.options.roles[b]};a.options={directives:c,roles:b,highlight:null,cwd:"./"};b=function(a){a.parentNode.remove(a)};
a.setDirective("immediate","@include",b);a.setDirective("immediate","@embed",b);window.kaj=a},{"./utils/class-blocklexer.js":6,"./utils/class-inlinelexer.js":7,"./utils/class-renderer.js":8,"./utils/class-tnode.js":9,"./utils/directives.js":10,"./utils/roles.js":12,clone:13,extend:14}],6:[function(h,k){var f=h("clone"),b=h("extend"),c=h("./helpers.js"),d=c.parseOptions,g=c.throwError,e=c.getIndent,a=c.trim,l=c.pad,j=h("./class-tnode.js"),p=function(a){var e=h("./class-inlinelexer.js"),d=h("./class-renderer.js");
this.options=a;this._inlineLexer=new e(a);this._helpers=b(f(c,!1),{clone:f,extend:b,options:this.options,blockLexer:this,inlineLexer:this._inlineLexer,Tnode:j,InlineLexer:e,BlockLexer:p,Renderer:d});this.lines=[];this.ast=new j({type:"_root_"},!0);this._markers={b_section:/^(==*)(.*)/,b_ul_item:/^([*+\-]) (.*)/,b_ol_item:/^#(\d\d*(?:\.\d\d*)*) (.*)/,b_lb_line:/^\|(?: (.*)|$)/,b_code:/^~\/\/([^ \t\f]*)(.*)/,b_oneliner:/^~\/ (.*)/,b_directive:/^\.\.(?: ([^ \t\f\{]+)\{([^{}]*)\}(.*)| (.*)|$)/,b_paragraph:null};
this._directives={};this._directiveQueues={before:[],after:[]};for(var g in a.directives){var e=a.directives[g],l;for(l in e)this.registerDirective(g,l,e[l])}(a=this.getDirective("#section"))&&this.scheduleDirective(a)};p.lex=function(a,b){return(new p(b)).lex(a)};p.prototype.lex=function(a){this.lines=a.split(/(?:\n|\r\n?)/);a=this.tokenize(this.ast,0,0);this.lines.splice(0,a);this.executeDirective("before");var b=this._inlineLexer;this.ast.traverse(function(a){/^(?:b_paragraph|b_lb_line|_fragment_)$/.test(a.type)&&
b.lex(a)});this.executeDirective("after");return this.ast};p.prototype.tokenize=function(b,c,d,f){for(var p=this.lines,h=this._markers,m,k=p.length;c<k;c++){var w=p[c],q=e(w);if(!1===q){if("i_text"!==f)continue}else if(q<d)break;else if(q>d&&"i_text"!==f)if(f)break;else{m=new j({type:"b_indented"},!0);m.parentNode=b;c=this.tokenize(m,c,q)-1;b.addNode(m);continue}w=w.substr(d);if("i_text"===f)b.addNode(new j({type:"i_text",text:w}));else{var t;a:for(t in h)switch(m=h[t],q=null,t){case "b_section":if(q=
m.exec(w)){var x=a(q[2]).replace(/ *==*$/,"");if(" "!==q[2][0]&&x)break;if(f&&t!==f)return c;q=q[1].length;if(x){if(b.type===t&&b.size>=q)return c;m=new j({type:t,size:q},!0);m.addNode(new j({type:"b_heading",size:q,text:x}));m.parentNode=b;c=this.tokenize(m,c+1,d)-1;if(b.type===t&&1<q-b.size)for(q-=1;q>b.size;)m=new j({type:t,size:q},m),q-=1;else if(b.type!==t&&1<q)for(q-=1;0<q;)m=new j({type:t,size:q},m),q-=1;b.addNode(m)}else if(b.type===t&&b.size>q)return c;break a}break;case "b_ul_item":if(q=
m.exec(w)){if(f&&t!==f)return c;"b_ul_block"===b.type?(m=new j({type:t,mark:q[1]},!0),x=c,this.lines[x]=l(d+2)+q[2],m.parentNode=b,c=this.tokenize(m,c,d+2)-1,this.lines[x]=l(d)+w,1<m.childNodes.length&&(b.complex=!0)):(m=new j({type:"b_ul_block"},!0),m.parentNode=b,c=this.tokenize(m,c,d,t)-1);b.addNode(m);break a}break;case "b_ol_item":if(q=m.exec(w)){if(f&&t!==f)return c;if("b_ol_block"===b.type){m=new j({type:t,mark:q[1]},!0);var x=q[1].length+2,A=c;this.lines[A]=l(d+x)+q[2];m.parentNode=b;c=this.tokenize(m,
c,d+x)-1;this.lines[A]=l(d)+w;1<m.childNodes.length&&(b.complex=!0)}else m=new j({type:"b_ol_block"},!0),m.parentNode=b,c=this.tokenize(m,c,d,t)-1;b.addNode(m);break a}break;case "b_lb_line":if(q=m.exec(w)){if(f&&t!==f)return c;"b_lb_block"===b.type?m=new j({type:t,text:a(q[1]||"")}):(m=new j({type:"b_lb_block"},!0),m.parentNode=b,c=this.tokenize(m,c,d,t)-1);b.addNode(m);break a}break;case "b_code":if(q=m.exec(w)){if(f&&t!==f)return c;m=new j({type:t,lang:q[1],"class":a(q[2])},!0);m.parentNode=b;
c=this.tokenize(m,c+1,d+3,"i_text")-1;m.text=m.getTextFromNodes("text","\n");m.childNodes=null;b.addNode(m);break a}break;case "b_oneliner":if(q=m.exec(w)){if(f&&t!==f)return c;m=new j({type:t,text:q[1]});b.addNode(m);break a}break;case "b_directive":if(q=m.exec(w)){if(f&&t!==f)return c;if(w=q[4]?"comment":q[1]||""){(x=this.getDirective(w))||g('Directive "'+w+'" does not exist.');if((this.isSameDirective(w,"header")||this.isSameDirective(w,"footer"))&&"b_section"===b.type)return c;m=new j({type:t,
row:c,indent:d,queue:x.queue,name:w,args:a(q[2]||""),text:a(q[3]||q[4]||"")},!0);"comment"===w&&q[4]&&(m.args="true",m.isImplicitComment=!0);c=this.tokenize(m,c+1,d+3,"i_text")-1;x=this.setupDirective(x,m);b.addNode(m);"immediate"===x.queue?this.executeDirective(x):this.scheduleDirective(x)}break a}break;case "b_paragraph":if(f&&t!==f)return c;m=new j({type:t,text:a(w)});b.addNode(m);break a;default:throw Error('Block element "'+t+'" does not have a handler.');}}}return c};p.prototype.setupDirective=
function(a,b){var c={};b.childNodes&&b.childNodes.length&&(c=d(b.getTextFromNodes("text","\n")));b.text&&c.normalText&&("comment"!==a.name||!b.isImplicitComment)&&g("Each directive can not have more than one body.");"comment"!==a.name?c.normalText?b.text=c.normalText:b.isOneliner=!0:b.text+=c.normalText?"\n"+c.normalText:"";b.opts=c.options||{};b.childNodes=null;return{queue:a.queue,action:a.action.bind(null),node:b}};p.prototype.getDirective=function(a){return this._directives[a]||null};p.prototype.isSameDirective=
function(a,b){return this._directives[a].action===this._directives[b].action};p.prototype.registerDirective=function(a,b,c){this._directives[b]={name:b,queue:a,action:c}};p.prototype.scheduleDirective=function(a){"before"===a.queue&&this.setupDirective(a,new j({type:"#directive"}));this._directiveQueues[a.queue].push(a)};p.prototype.executeDirective=function(a){if("string"===typeof a){a=this._directiveQueues[a];for(var b=0,c=a.length;b<c;b++)this.executeDirective(a[b])}else a.action(a.node,this.ast,
this._helpers)};k.exports=p},{"./class-inlinelexer.js":7,"./class-renderer.js":8,"./class-tnode.js":9,"./helpers.js":11,clone:13,extend:14}],7:[function(h,k){var f=h("./helpers.js").throwError,b=h("./helpers.js").trim,c=h("./class-tnode.js"),d=function(b){this.options=b;this._markers={i_bold:["{*","*}"],i_italic:["{/","/}"],i_standout:["{%","%}"],i_code:["{`","`}"],i_keystroke:["{:",":}"],i_literal:["``","``"],i_link:["[[","]]"],i_raw:["{{","}}"],i_role:["{~","~}"],i_note:["{[","]}"],i_anchor:["{#",
"#}"],i_pipe:["{|","|}"]};this._markerNames="i_bold i_italic i_standout i_code i_keystroke i_literal i_link i_raw i_role i_note i_anchor i_pipe".split(" ")};d.lex=function(b,c){return(new d(c)).lex(b)};d.prototype.lex=function(d){if(!d.childNodes&&"text"in d){d.childNodes=[];for(var e=this._markers,a=this._markerNames,l=d.text||"",j="";l;){var p=1,v=0,h=a.length;a:for(;v<h;v++){var s=a[v],u=e[s],k=u[0].length;if(l.substr(0,k)===u[0])switch(p=l.indexOf(u[1],k),0>p&&f('Inline markup "'+u[0]+'" without "'+
u[1]+'".'),k=l.substring(k,p),j&&(d.addNode(new c({type:"i_text",text:j})),j=""),p=u[0].length+k.length+u[1].length,s){case "i_bold":case "i_italic":case "i_standout":case "i_literal":d.addNode(new c({type:s,text:b(k)}));break a;case "i_code":case "i_keystroke":case "i_raw":d.addNode(new c({type:s,text:k}));break a;case "i_link":u=/^(.*?)(?:\|(.*))?$/.exec(k);d.addNode(new c({type:s,text:b(u[1]),link:b(u[2]||"")}));break a;case "i_role":u=k.indexOf("~");d.addNode(new c({type:s,name:0>u?"general":
b(k.substr(0,u)),text:0>u?k:k.substr(u+1)}));break a;case "i_note":case "i_anchor":case "i_pipe":d.addNode(new c({type:s,name:b(k)}));break a;default:throw Error('Span element "'+s+'" does not have a handler.');}}if(1===p){for(s=0;" "===l[s];s++);if(0<s)d.addNode(new c({type:"i_text",text:" "})),j="",l=l.substr(s);else if(j+=l[0],l=l.substr(1),!l||" "===l[0])d.addNode(new c({type:"i_text",text:j})),j=""}else l=l.substr(p)}d.text||d.addNode(new c({type:"i_text",text:""}));delete d.text}};k.exports=
d},{"./class-tnode.js":9,"./helpers.js":11}],8:[function(h,k){var f=h("clone"),b=h("extend"),c=h("./helpers.js"),d=c.mergeClasses,g=c.trim,e=function(a){var d=h("./class-tnode.js"),g=h("./class-blocklexer.js"),p=h("./class-inlinelexer.js");this.options=a;this._helpers=b(f(c,!1),{clone:f,extend:b,options:this.options,renderer:this,Tnode:d,InlineLexer:p,BlockLexer:g,Renderer:e})};e.escape=function(a){return a?a.replace(/["'&<>]/g,function(a){switch(a){case '"':return"&quot;";case "'":return"&#39;";
case "&":return"&amp;";case "<":return"&lt;";case ">":return"&gt;";default:return a}}):""};e.getAttrId=function(a){return a?' id="'+e.escape(a)+'"':""};e.getAttrAny=function(a,b){Array.isArray(b)&&(b=b.filter(function(a){return a&&g(a)}),"class"===a&&(b=b.map(function(a){return a.replace(/[ \t\f]+/g,"-")})),b=b.join(" "));return b?" "+a+'="'+e.escape(b)+'"':""};e.getElement=function(a,b,c,d,g,f){"object"!==typeof b&&(f=g,g=d,d=c,c=b,b={});var s="<"+a,h;for(h in b)s="id"===h?s+e.getAttrId(b[h]):s+
e.getAttrAny(h,b[h]);s+=">";d||(c=c||"",s+=(f?"\n":"")+(g?c:e.escape(c))+(f?"\n":"")+"</"+a+">");return s};e.getBlock=function(a,b,c,d,g){return e.getElement(a,b,c,d,g,!0)};e.getSpan=function(a,b,c,d,g){return e.getElement(a,b,c,d,g,!1)};e.render=function(a,b){return(new e(b)).render(a)};e.prototype.render=function(a){this._ast=a;var b="",c=this;a.traverse(function(a){var d;switch(a.type.substr(0,2)){case "b_":d=c[a.type](a,c._ast,c._helpers);a.parentNode._html=a.parentNode._html?a.parentNode._html+
"\n"+d:d;delete a._html;break;case "i_":d=c[a.type](a,c._ast,c._helpers);a.parentNode._html=(a.parentNode._html||"")+d;delete a._html;break;default:if(/^[a-z][a-z]*$/.test(a.type)){d={};for(var g=Object.keys(a),f=0,h=g.length;f<h;f++){var k=g[f];"$"===k.charAt(0)&&(d[k.substr(1)]=a[k])}f=(g=!a.isSpan)?"getBlock":"getSpan";d=a.text?e[f](a.type,d,a.text||"",a.isClosed,!1):e[f](a.type,d,a._html||"",a.isClosed,!0);if(!a.parentNode)return b=(g?"\n":"")+d,!1;a.parentNode._html=(a.parentNode._html||"")+
(a.parentNode._html&&g?"\n":"")+d}else if("_fragment_"===a.type){d=a._html||"";if(!a.parentNode)return b=d,!1;a.parentNode._html=(a.parentNode._html||"")+d}else b="_root_"===a.type?(a._html||"").replace(/^\n+|\n+$/g,""):a._html||"";delete a._html}});return b};e.prototype.b_section=function(a){return e.getBlock(1===a.size?"div":"section",{id:a.$id||a.id,"class":d("kaj-section",a.$class),style:a.$style,title:a.$title},a._html||"",!1,!0)};e.prototype.b_heading=function(a){var b=a.link?e.getSpan("a",
{href:encodeURI(a.link)},a.text||""):e.getSpan("span",a.text||"");return e.getSpan(7>a.size?"h"+a.size:"p",{id:a.$id,"class":d("kaj-title",a.$class),style:a.$style,title:a.$title},b,!1,!0)};e.prototype.b_ul_item=function(a){var b="";switch(a.mark){case "*":b="kaj-item-x";break;case "+":b="kaj-item-y";break;case "-":b="kaj-item-z"}return e.getSpan("li",{id:a.$id,"class":d(b,a.$class),style:a.$style,title:a.$title},a._html||"",!1,!0)};e.prototype.b_ul_block=function(a){return e.getBlock("ul",{id:a.$id,
"class":a.$class,style:a.$style,title:a.$title},a._html||"",!1,!0)};e.prototype.b_ol_item=function(a){return e.getSpan("li",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a._html||"",!1,!0)};e.prototype.b_ol_block=function(a){return e.getBlock("ol",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a._html||"",!1,!0)};e.prototype.b_lb_line=function(a){return e.getSpan("div",{id:a.$id,"class":d("kaj-line",a.$class),style:a.$style,title:a.$title},a._html?a._html:e.getSpan("br","",
!0),!1,!0)};e.prototype.b_lb_block=function(a){return e.getBlock("div",{id:a.$id,"class":d("kaj-line-block",a.$class),style:a.$style,title:a.$title},a._html||"",!1,!0)};e.prototype.b_code=function(a){var b,c=this.options.highlight;c&&(b=c(a.text,a.lang));return e.getBlock("pre",{id:a.$id,"class":d(a.lang&&"lang-"+a.lang,a.class,a.$class),style:a.$style,title:a.$title},b?b:a.text,!1,!!b)};e.prototype.b_oneliner=function(a){var b,c=this.options.highlight;c&&(b=c(a.text,a.lang));return e.getSpan("pre",
{id:a.$id,"class":d("kaj-oneliner",a.$class),style:a.$style,title:a.$title},b?b:a.text,!1,!!b)};e.prototype.b_paragraph=function(a){return("b_ul_item"===a.parentNode.type||"b_ol_item"===a.parentNode.type)&&!a.parentNode.parentNode.complex?a._html||"":e.getSpan("p",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a._html||"",!1,!0)};e.prototype.b_indented=function(a){return e.getBlock("blockquote",{id:a.$id,"class":d("kaj-indented",a.$class),style:a.$style,title:a.$title},a._html||"",!1,!0)};
e.prototype.b_raw=function(a){return a.text?a.text:""};e.prototype.i_raw=function(a){return a.text||""};e.prototype.i_text=function(a){return e.escape(a.text)};e.prototype.i_bold=function(a){return e.getSpan("b",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a.text)};e.prototype.i_italic=function(a){return e.getSpan("i",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a.text)};e.prototype.i_standout=function(a){return e.getSpan("b",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},
e.getSpan("i",a.text),!1,!0)};e.prototype.i_code=function(a){return e.getSpan("code",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a.text)};e.prototype.i_keystroke=function(a){return e.getSpan("kbd",{id:a.$id,"class":a.$class,style:a.$style,title:a.$title},a.text)};e.prototype.i_literal=function(a){return e.getSpan("span",{id:a.$id,"class":d("kaj-inline-literal",a.$class),style:a.$style,title:a.$title},a.text)};e.prototype.i_link=function(a){if(a.link){var b;if(b=/^=(\d\d*(?:\.\d\d*)*)=$/.exec(a.link))a.link=
"#kaj-section-"+b[1].replace(/\./g,"-");else if(b=/^#(.+)#$/.exec(a.link))a.link="#kaj-anchor-def-"+b[1];else if(b=/^~(.+)~$/.exec(a.link))a.link=/^\d\d*$/.test(b[1])?"#kaj-note-def-"+b[1]:"#kaj-cite-def-"+b[1]}else a.link=a.text;return e.getSpan("a",{id:a.$id,"class":d("kaj-link-"+("#"===a.link[0]?"internal":"external"),a.link===a.text?"kaj-link-raw":null,a.$class),style:a.$style,title:a.$title,href:encodeURI(a.link)},a.text)};e.prototype.i_anchor=function(a){return!a.name?"":e.getSpan("span",{id:a.$id||
"kaj-anchor-def-"+a.name,"class":d("kaj-anchor-def",a.$class),style:a.$style,title:a.$title},"")};e.prototype.i_pipe=function(a){return!a.name?"":e.getSpan("span",{id:a.$id,"class":d("kaj-pipe",a.$class),style:a.$style,title:a.$title},a.name)};e.prototype.i_note=function(a){return!a.name?"":/^\d\d*$/.test(a.name)?e.getSpan("a",{id:a.$id,"class":d("kaj-note-ref",a.$class),style:a.$style,title:a.$title,href:"#kaj-note-def-"+a.name},e.getSpan("sup",a.name),!1,!0):e.getSpan("a",{id:a.$id,"class":d("kaj-cite-ref",
a.$class),style:a.$style,title:a.$title,href:"#kaj-cite-def-"+encodeURI(a.name)},a.name)};e.prototype.i_role=function(a){if(/^[ \t\f]*$/.test(a.name||""))return"";var b=this.options.roles;return b[a.name]?b[a.name](a,this._ast,this._helpers):e.getSpan("span",{id:a.$id,"class":d("kaj-role-"+a.name,a.$class),style:a.$style,title:a.$title},a.text)};k.exports=e},{"./class-blocklexer.js":6,"./class-inlinelexer.js":7,"./class-tnode.js":9,"./helpers.js":11,clone:13,extend:14}],9:[function(h,k){var f=h("./helpers.js").rtrimTextBlock,
b=function(c,d){this.id=this.class=this.style="";for(var g=Object.keys(c),e=0,a=g.length;e<a;e++){var f=g[e];void 0!==c[f]&&(this[f]=c[f])}this.text=this.text||"";this.$id=this.$id||"";this.$title=this.$title||"";this.$style=this.$style||"";this.$class=this.$class||"";this.childNodes=d?[]:null;d instanceof b?this.addNode(d):Array.isArray(d)&&this.addNodes(d);this.parentNode=null};b.prototype.addNode=function(b){this.childNodes.push(b);b.parentNode=this};b.prototype.addNodes=function(b){for(var d=
0,g=b.length;d<g;d++)this.addNode(b[d])};b.prototype.replaceNode=function(b,d){var g=this.childNodes.indexOf(b);0<=g&&(Array.isArray(d)?(this.insertNode(g,d),b.parentNode.removeNode(b)):(this.childNodes[g]=d,d.parentNode=this),b.parentNode=null)};b.prototype.insertNode=function(b,d){if(Array.isArray(d)){this.childNodes.splice.apply(this.childNodes,[b,0].concat(d));for(var g=0,e=d.length;g<e;g++)d[g].parentNode=this}else this.childNodes.splice(b,0,d),d.parentNode=this};b.prototype.getNthNode=function(b){return this.childNodes[b-
1]||null};b.prototype.getTextFromNodes=function(b,d){for(var g=this.childNodes||[],e=g.length,a=[],l=0;l<e;l++)a.push(g[l][b]||"");return f(a.join(d))};b.prototype.removeNode=function(b){var d=this.childNodes.indexOf(b);0<=d&&this.childNodes.splice(d,1);b.parentNode=null};b.prototype.remove=function(){this.parentNode.removeNode(this)};b.prototype.replace=function(b){this.parentNode.replaceNode(this,b)};b.prototype.traverse=function(b,d){if(d){var g=b(this);if(!0===g||!1===g)return g;if(this.childNodes){g=
[];e=this.childNodes;do{a=0;f=e.length;a:for(;a<f;a++)if(e[a]){switch(b(e[a])){case !1:return!1;case !0:continue a}e[a].childNodes&&(g=g.concat(e[a].childNodes))}e=g;g=[]}while(e.length)}}else{if(this.childNodes){var e=this.childNodes,a=0,f=e.length;a:for(;a<f;a++)if(e[a])switch(e[a].traverse(b,d)){case !1:return!1;case !0:break a}}return b(this)}};k.exports=b},{"./helpers.js":11}],10:[function(h,k){k.exports={before:{"#section":function(f,b){var c=function(b){if(b!==this.root){if("b_section"!==b.type)return!0;
if(6<b.size)return!1;var g=b.size,e=this.counters;g>e.length&&(e[g-1]=0);e[g-1]+=1;var a=e.slice(0,g).join("-");b.id="kaj-section-"+a;b.childNodes&&6>g&&b.traverse(c.bind({root:b,counters:e.slice(0,g)}),!0);return!0}};b.traverse(c.bind({root:b,counters:[]}),!0)},role:function(f,b,c){f.parentNode.removeNode(f);b=f.args;(!b||/^[ \t\f~]|[ \t\f~]$/.test(b))&&c.throwError('Directive "role": invalid role name');var d=f.opts,g=d.wrapper||"span";/^!--|[<>\/?\x00]/.test(g)&&c.throwError('Directive "role": invalid value for option "wrapper"');
var e=d.class;e&&(e=e.split(/[ \t\f]+/));c.options.roles[b]=function(a,b,c){return c.Renderer.getSpan(g,{id:d.id||a.$id,"class":c.mergeClasses(e,a.$class),style:(d.style?d.style+";":"")+a.$style,title:d.title||a.$title},a.text)}}},immediate:{"@":function(f,b){var c=f.args,d=f.opts;if(c){c="#"+c;b[c]={};for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(b[c][g]=d[g])}f.parentNode.removeNode(f)},raw:function(f,b,c){"html"===f.args?f.parentNode.replaceNode(f,new c.Tnode({type:"b_raw",text:c.ltrimTextBlock(f.text)})):
f.parentNode.removeNode(f)},comment:function(f,b,c){"true"===f.args?(b=c.ltrimTextBlock,f.parentNode.replaceNode(f,new c.Tnode({type:"b_raw",text:b(f.text).split("\n").map(function(b,c){b=b.replace(/--\x3e/g,"- ->");return 0<c?b?"     "+b:"":"\x3c!-- "+b}).join("\n")+" --\x3e"}))):f.parentNode.removeNode(f)},alias:function(f,b,c){f.parentNode.removeNode(f);f.isOneliner||c.throwError('Directive "alias": invalid syntax');var d=f.text;(!d||/^[# \t\f~]|[ \t\f~]$/.test(d))&&c.throwError('Directive "alias": invalid old name');
b=f.opts.to;(!b||/^[# \t\f]|[ \t\f]$/.test(b)||/[{}]/.test(b))&&c.throwError('Directive "alias": invalid new name');f=f.args;"role"===f?(c=c.options.roles,c[b]=c[d]):"directive"===f&&(f=c.options.directives,f.before[d]?(d=f.before[b]=f.before[d],c.blockLexer.registerDirective("before",b,d)):f.immediate[d]?(d=f.immediate[b]=f.immediate[d],c.blockLexer.registerDirective("immediate",b,d)):f.after[d]&&(d=c.options.directives.after[b]=f.after[d],c.blockLexer.registerDirective("after",b,d)))},"class":function(f,
b,c){var d=c.Tnode;b=f.opts;var g=b.class||f.args,e=f.row+Object.keys(f.opts).length+1,a=f.indent+3,l=f.parentNode;g&&(g=g.split(/[ \t\f]+/));if(f.isOneliner)f.text=c.ltrimTextBlock(f.text),d=new d({type:"div",isSpan:!0,$id:b.id,$class:g,$style:b.style,$title:b.title},new d({type:"_fragment_",text:f.text})),l.replaceNode(f,d);else{d=new d({type:""},!0);d.parentNode=l;c.blockLexer.tokenize(d,e,a);e=d.childNodes;a=0;for(d=e.length;a<d;a++)g&&(e[a].$class=e[a].$class?c.mergeClasses(e[a].$class,g):g),
b.id&&(e[a].$id=b.id,b.id=null),b.style&&(e[a].$style+=(e[a].$style?";":"")+b.style),b.title&&(e[a].$title=b.title);l.replaceNode(f,e)}},block:function(f,b,c){b=c.Tnode;var d=f.opts,g=d.class||f.args;g&&(g=g.split(/[ \t\f]+/));g=new b({type:"div",$id:d.id,$class:g,$style:d.style,$title:d.title},!0);f.isOneliner?(f.text=c.ltrimTextBlock(f.text),g.isSpan=!0,g.addNode(new b({type:"_fragment_",text:f.text}))):(g.parentNode=f.parentNode,c.blockLexer.tokenize(g,f.row+Object.keys(d).length+1,f.indent+3));
f.parentNode.replaceNode(f,g)},header:function(f,b,c){b=c.Tnode;var d=f.opts,g=d.class;g&&(g=g.split(/[ \t\f]+/));g=new b({type:"header",$id:d.id,$class:g,$style:d.style,$title:d.title},!0);f.isOneliner?(f.text=c.ltrimTextBlock(f.text),f.text?(g.isSpan=!0,g.addNode(new b({type:"_fragment_",text:f.text})),f.parentNode.replaceNode(f,g)):f.parentNode.removeNode(f)):(g.parentNode=f.parentNode,c.blockLexer.tokenize(g,f.row+Object.keys(d).length+1,f.indent+3),f.parentNode.replaceNode(f,g))},footer:function(f,
b,c){b=c.Tnode;var d=f.opts,g=d.class;g&&(g=g.split(/[ \t\f]+/));g=new b({type:"footer",$id:d.id,$class:g,$style:d.style,$title:d.title},!0);f.isOneliner?f.text?(f.text=c.ltrimTextBlock(f.text),g.isSpan=!0,g.addNode(new b({type:"_fragment_",text:f.text})),f.parentNode.replaceNode(f,g)):f.parentNode.removeNode(f):(g.parentNode=f.parentNode,c.blockLexer.tokenize(g,f.row+Object.keys(d).length+1,f.indent+3),f.parentNode.replaceNode(f,g))},image:function(f,b,c){b=c.Tnode;var d=c.mergeClasses,g=f.args.replace(/[ \t\f]+/g,
"-"),e=c.ltrimTextBlock(f.text);c=f.opts;var a=c.class;a&&(a=a.split(/[ \t\f]+/));c.id=c.id||"";c.class=c.class||"";c.style=c.style||"";c.title=c.title||"";c.caption=c.caption||"";var l="true"===c.simple,a=g?d("kaj-image-"+g,a):a,d=new b({type:"img",isClosed:!0,$id:l?c.id:"",$class:l?a:"",$style:c.style,$title:l?c.title:"",$alt:c.alt},!1),g=encodeURI(e.split(/  */,1)[0]),e=/ /.test(e)&&e.split(/ *,  */).map(function(a){a=a.split(/  */);a[0]=encodeURI(a[0]);return a.join(" ")}).join(", "),j,p;"true"!==
c.lazyload?(j="$src",p="$srcset"):(j="$data-src",p="$data-srcset");d[j]=g;d[p]=e;c.link&&(d=new b({type:"a",isSpan:!0,$href:encodeURI(c.link)},d));l||(d=new b({type:"figure",$id:c.id,$class:a,$title:c.title},d),c.caption&&d.addNode(new b({type:"figcaption",isSpan:!0},new b({type:"_fragment_",text:c.caption}))));f.parentNode.replaceNode(f,d)},note:function(f,b,c){if(b=f.args){var d=c.Tnode,g=c.ltrimTextBlock(f.text),e=f.opts,a=e.class;a&&(a=a.split(/[ \t\f]+/));var l=!/^\d\d*$/.test(b),j=new d({type:"_fragment_"},
!0);f.isOneliner?(j.text=g,j.childNodes=null):(j.parentNode=f.parentNode,c.blockLexer.tokenize(j,f.row+Object.keys(e).length+1,f.indent+3));j=new d({type:"tr"},[new d({type:"td",isSpan:!0,$class:"kaj-label",text:"["+b+"]"}),new d({type:"td",isSpan:f.isOneliner},j)]);j=new d({type:"table",$class:c.mergeClasses("kaj-"+(l?"cite-def":"note-def"),a),$id:e.id||"kaj-"+(l?"cite-def-":"note-def-")+encodeURI(b)},j);f.parentNode.replaceNode(f,j)}else f.parentNode.removeNode(f)},"csv-table":function(f,b,c){b=
c.Tnode;var d=c.ltrimTextBlock,g=f.args,e=f.opts,a=e.class;a&&(a=a.split(/[ \t\f]+/));var l=(e.header||"").split(/[ \t]+/,2).map(function(a){return"true"===a}),j=e.delimiter||",",p=e.linebreak||!1,d=d(f.text).split("\n").map(function(a){return a.split(j)}).filter(function(a){return a.length}),g=new b({type:"table",$id:e.id,$class:a,$style:e.style,$title:e.title},g?new b({type:"caption",isSpan:!0,text:g}):!0);p&&(p=RegExp("[ \\t]*"+p.replace(/([.\\+*?\^\[\]$(){}])/g,"\\$1")+"[ \\t]*","g"));if(l[0]){var h=
!1;if(e=d.shift())for(var h=new b({type:"tr"},!0),a=0,k=e.length;a<k;a++)text=c.trim(e[a]),p&&(text=text.replace(p,"{{<br>}}")),h.addNode(new b({type:"th",isSpan:!0},new b({type:"_fragment_",text:text})));g.addNode(new b({type:"thead"},h))}h=new b({type:"tbody"},!0);a=0;for(k=d.length;a<k;a++){for(var e=d[a],s=new b({type:"tr"},!0),u=0,B=e.length;u<B;u++)text=c.trim(e[u]),p&&(text=text.replace(p,"{{<br>}}")),s.addNode(new b({type:0===u&&l[1]?"th":"td",isSpan:!0},new b({type:"_fragment_",text:text})));
h.addNode(s)}g.addNode(h);f.parentNode.replaceNode(f,g)}},after:{link:function(f,b,c){f.parentNode.removeNode(f);f.text=c.ltrimTextBlock(f.text);var d=f.args.toLowerCase(),g=f.text;if(g&&d){var e=f.opts;b.traverse(function(a){if("i_link"===a.type){if(a.link){var b=/^\{(.+)\}$/.exec(a.link);if(!b||b[1].toLowerCase()!==d)return}else if(a.text.toLowerCase()!==d)return;a.link=g;e.id&&(a.$id=e.id,e.id=null);e.class&&((b=e.class)&&(b=b.split(/[ \t\f]+/)),a.$class=a.$class?c.mergeClasses(a.$class,b):b);
e.style&&(a.$style+=(a.$style?";":"")+e.style);e.title&&(nodes.$title=e.title)}})}},"pipe-image":function(f,b,c){f.parentNode.removeNode(f);var d=f.args,g=c.ltrimTextBlock(f.text);if(d&&g){var e=f.opts;e.simple="true";b.traverse(function(a){"i_pipe"!==a.type||a.name!==d||(a.args=e.format||"",a.opts=e,a.text=g,c.options.directives.immediate.image(a,b,c))})}},"pipe-abbr":function(f,b,c){f.parentNode.removeNode(f);var d=f.args,g=c.ltrimTextBlock(f.text);if(d&&g){var e=f.opts,a=e.class;a&&(a=a.split(/[ \t\f]+/));
b.traverse(function(b){if(!("i_pipe"!==b.type||b.name!==d)){var f=new c.Tnode({type:"abbr",isSpan:!0,text:d,$title:e.title||g,$id:e.id,$class:a,$style:e.style});b.parentNode.replaceNode(b,f)}})}},"pipe-text":function(f,b,c){f.parentNode.removeNode(f);var d=f.args,g=c.ltrimTextBlock(f.text);if(d&&g){var e="raw"===f.opts.format?"i_raw":"i_text";b.traverse(function(a){if(!("i_pipe"!==a.type||a.name!==d)){var b=new c.Tnode({type:e,text:g});a.parentNode.replaceNode(a,b)}})}},contents:function(f,b,c){var d=
c.Tnode;c=f.args;var g=f.opts,e=g.class;e&&(e=e.split(/[ \t\f]+/));var a=parseInt(g.depth,10),a=1<=a&&6>=a?a:3,g=new d({type:"div",$id:g.id||"kaj-contents",$class:e,$style:g.style,$title:g.title},!0);c&&g.addNode(new d({type:"div",$class:"kaj-contents-title"},new d({type:"span",isSpan:!0,text:c})));var l=new d({type:"ul"},!0);b.traverse(function(c){if(c!==b){if("b_section"!==c.type)return!0;if(c.size>a)return!1;if(!c.id)return!0;var e=c.size,f=c.getNthNode(1);"b_heading"!==f.type&&(f={});f.link="#kaj-contents";
var e=c.id.replace(/^kaj-section-/,"").split("-",e).map(function(a){return parseInt(a,10)}),g=l.getNthNode(e[0]);g||(g=new d({type:"li"},new d({type:"a",isSpan:!0,$href:"#"+c.id,text:f.text})),l.addNode(g));for(var h,k=1,B=e.length;k<B;k++){if(!(h=g.getNthNode(2)))h=new d({type:"ul"},!0),g.addNode(h);g=h;if(!(h=g.getNthNode(e[k])))h=new d({type:"li"},new d({type:"a",isSpan:!0,$href:"#"+c.id,text:f.text})),g.addNode(h);g=h}}},!0);l.childNodes.length?(g.addNode(l),f.parentNode.replaceNode(f,g)):f.parentNode.removeNode(f)}}}},
{}],11:[function(h,k){var f=function(b){return b.replace(/^[ \t\f]+|[ \t\f]+$/g,"")};k.exports={throwError:function(b){throw Error("SyntaxError: "+b+"\n");},trim:f,ltrimTextBlock:function(b){return b.replace(/^(?: *\n)+/,"")},rtrimTextBlock:function(b){return b.replace(/(?:\n *)+$/,"")},parseOptions:function(b){var c={};b=b.split("\n");for(var d=0,g;g=b[d];d++){var e=/^:([^:][^:]*):(.*)$/.exec(g);if(!e)break;g=e[1];e=f(e[2]);c[g]=e}return{options:c,optionText:b.slice(0,d).join("\n"),normalText:b.slice(d).join("\n")}},
mergeClasses:function(){for(var b=[].slice.call(arguments),c=[],d=0,g=b.length;d<g;d++)c=c.concat(b[d]);return c},getIndent:function(b){b=b.search(/[^ ]/);return 0>b?!1:b},pad:function(b){for(var c="",d="";0<b;)d+=d||" ",1===(b&1)&&(c+=d),b>>>=1;return c}}},{}],12:[function(h,k){k.exports={general:function(f,b,c){return c.Renderer.getSpan("span",{id:f.$id,"class":c.mergeClasses("kaj-general",f.$class),style:f.$style,title:f.$title},c.trim(f.text))}}},{}],13:[function(h,k){var f="undefined"!==typeof global?
global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},b=h("buffer").Buffer,f="object"===typeof f?f:"object"===typeof window?window:this,c=function(d,g,f,h){function k(d,f){if(null===d)return null;if(0==f)return d;var j,q;if("object"!=typeof d)return d;if(a(d))j=[];else if(l(d))j=RegExp(d.source,c.getRegExpFlags(d)),d.lastIndex&&(j.lastIndex=d.lastIndex);else if(e(d))j=new Date(d.getTime());else{if(C&&b.isBuffer(d))return j=new b(d.length),d.copy(j),j;"undefined"==typeof h?(q=
Object.getPrototypeOf(d),j=Object.create(q)):(j=Object.create(h),q=h)}if(g){var t=u.indexOf(d);if(-1!=t)return B[t];u.push(d);B.push(j)}for(var v in d){var A;q&&(A=Object.getOwnPropertyDescriptor(q,v));A&&null==A.set||(j[v]=k(d[v],f-1))}return j}"object"===typeof g&&(f=g.depth,h=g.prototype,g=g.circular);var u=[],B=[],C="undefined"!=typeof b;"undefined"==typeof g&&(g=!0);"undefined"==typeof f&&(f=Infinity);return k(d,f)},d=function(a){var b="";a.global&&(b+="g");a.ignoreCase&&(b+="i");a.multiline&&
(b+="m");return b},g=function(a){return Object.prototype.toString.call(a)},e=function(a){return"object"===typeof a&&"[object Date]"===g(a)},a=function(a){return"object"===typeof a&&"[object Array]"===g(a)},l=function(a){return"object"===typeof a&&"[object RegExp]"===g(a)};c.clonePrototype=function(a){if(null===a)return null;var b=function(){};b.prototype=a;return new b};f.TESTING&&(c.getRegExpFlags=d);f.TESTING&&(c.objectToString=g);f.TESTING&&(c.isDate=e);f.TESTING&&(c.isArray=a);f.TESTING&&(c.isRegExp=
l);k&&k.exports&&(k.exports=c)},{buffer:1}],14:[function(h,k){var f=Object.prototype.hasOwnProperty,b=Object.prototype.toString,c=function(c){if(!c||"[object Object]"!==b.call(c))return!1;var g=f.call(c,"constructor"),e=c.constructor&&c.constructor.prototype&&f.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!g&&!e)return!1;for(var a in c);return void 0===a||f.call(c,a)};k.exports=function g(){var b,a,f,j,h,k=arguments[0],y=1,s=arguments.length,u=!1;if("boolean"===typeof k)u=k,k=arguments[1]||
{},y=2;else if("object"!==typeof k&&"function"!==typeof k||null==k)k={};for(;y<s;++y)if(b=arguments[y],null!=b)for(a in b)f=k[a],j=b[a],k!==j&&(u&&j&&(c(j)||(h=Array.isArray(j)))?(h?(h=!1,f=f&&Array.isArray(f)?f:[]):f=f&&c(f)?f:{},k[a]=g(u,f,j)):void 0!==j&&(k[a]=j));return k}},{}]},{},[5]);
